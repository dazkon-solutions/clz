(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-381e0fd5"],{5311:function(e,t,a){"use strict";a("14d9");var s=a("5607"),i=a("2b0e");t["a"]=i["a"].extend({name:"rippleable",directives:{ripple:s["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(e={}){return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",e)):null}}})},"83f0":function(e,t,a){"use strict";var s=a("c6a6"),i=a("8336"),l=a("b0af"),r=a("99d9"),n=a("62ad"),o=a("169a"),c=a("ce7e"),u=a("4bd4"),d=a("132d"),h=a("e449"),m=a("0fd9"),p=a("b974"),g=a("2fa4"),f=a("b73d"),v=a("8654"),b=a("c964"),y=function(){var e=this,t=e._self._c;return t(m["a"],{attrs:{justify:"end"}},[t(o["a"],{attrs:{scrollable:"","max-width":"700px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(i["a"],e._g(e._b({staticClass:"teal mr-5",attrs:{small:"",block:"",dark:"",depressed:""},on:{click:function(t){e.getClassDetails(),e.getClassHall(),e.getTeachers()}}},"v-btn",s,!1),a),[e._v("Edit"),t(d["a"],{attrs:{dark:"",right:""}},[e._v("mdi-pencil")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],{attrs:{"max-width":"700",flat:""}},[t(r["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[e._v("Edit Class")]),t(c["a"]),t(r["c"],[t(r["c"],[e._v("You can change details.")]),t(l["a"],{staticStyle:{margin:"auto"},attrs:{flat:"","max-width":"750px"}},[t(u["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(l["a"],{staticClass:"mb-12",attrs:{flat:"","min-height":"250px"}},[t(m["a"],{attrs:{dense:""}},[t(n["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(s["a"],{attrs:{items:e.teachers,filter:e.teacherFilter,"item-text":"firstName","item-value":"teacherID",label:"Teacher","prepend-icon":"mdi-account",rules:e.teacherRules},model:{value:e.teacher,callback:function(t){e.teacher=t},expression:"teacher"}})],1),t(n["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(p["a"],{attrs:{items:e.grade,rules:e.gradeRules,label:"Grade","prepend-icon":"mdi-card-bulleted"},on:{change:function(t){return e.createClassName()}},model:{value:e.getGrade,callback:function(t){e.getGrade=t},expression:"getGrade"}})],1),t(n["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(p["a"],{attrs:{items:e.feeType,label:"Fee Type","prepend-icon":"mdi-form-select",rules:e.feeTypeRules,Required:""},model:{value:e.getFeeType,callback:function(t){e.getFeeType=t},expression:"getFeeType"}})],1),t(n["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(v["a"],{attrs:{label:"Fee","prepend-icon":"mdi-cash-multiple",rules:e.feeRules,Required:"",prefix:"RS.",placeholder:"0.00",clearable:""},model:{value:e.fee,callback:function(t){e.fee=t},expression:"fee"}})],1),t(n["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(p["a"],{attrs:{items:e.day,label:"Day","prepend-icon":"mdi-calendar",rules:e.dayRules,Required:""},on:{change:function(t){return e.createClassName()}},model:{value:e.getDay,callback:function(t){e.getDay=t},expression:"getDay"}})],1),t(n["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(p["a"],{attrs:{items:e.location,label:"Location","prepend-icon":"mdi-map-marker",rules:e.locationRules,Required:"",disabled:!e.getDay},model:{value:e.getLocation,callback:function(t){e.getLocation=t},expression:"getLocation"}})],1),t(n["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t("div",[t(h["a"],{ref:"startTimeMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.startTime,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.startTime=t},"update:return-value":function(t){e.startTime=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(v["a"],e._g(e._b({attrs:{label:"Start Time","prepend-icon":"mdi-clock-time-four-outline",readonly:"",rules:e.timeRules,Required:"",disabled:!e.getDay},on:{change:function(t){return e.createClassName()}},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}},"v-text-field",s,!1),a))]}}]),model:{value:e.startTimeMenu,callback:function(t){e.startTimeMenu=t},expression:"startTimeMenu"}},[e.startTimeMenu?t(b["a"],{attrs:{"full-width":""},on:{"click:minute":function(t){return e.$refs.startTimeMenu.save(e.startTime)}},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}):e._e()],1)],1)]),t(n["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t("div",[t(h["a"],{ref:"endTimeMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.endTime,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.endTime=t},"update:return-value":function(t){e.endTime=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(v["a"],e._g(e._b({attrs:{label:"End Time","prepend-icon":"mdi-clock-time-four-outline",readonly:"",rules:e.timeRules,Required:"",disabled:!e.startTime},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}},"v-text-field",s,!1),a))]}}]),model:{value:e.endTimeMenu,callback:function(t){e.endTimeMenu=t},expression:"endTimeMenu"}},[e.endTimeMenu?t(b["a"],{attrs:{"full-width":""},on:{"click:minute":function(t){return e.$refs.endTimeMenu.save(e.endTime)}},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}}):e._e()],1)],1)]),t(n["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[t(v["a"],{attrs:{label:"Class Name","prepend-icon":"mdi-home-variant",rules:e.nameRules,required:""},model:{value:e.className,callback:function(t){e.className=t},expression:"className"}})],1),t(n["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[t(c["a"]),t(f["a"],{attrs:{color:"red",inset:"",label:"Mark as a Deactivated Class"},on:{change:function(t){return e.classStatus()}},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1)],1)],1)],1)],1)],1),t(c["a"]),t(r["a"],[t(g["a"]),t(i["a"],{attrs:{outlined:"",color:"grey"},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),t(i["a"],{attrs:{loading:e.loading,color:"primary",depressed:""},on:{click:function(t){return e.updateClass()}}},[e._v("Save "),t(d["a"],{attrs:{left:""}},[e._v("mdi-content-save")])],1)],1)],1)],1)],1)},T=[],C=(a("14d9"),{props:["classDetails"],data(){return{dialog:!1,loading:!1,valid:!0,getLocation:"",getDay:"",getFeeType:"Daily",className:"",fee:"0.00",getGrade:"",startTimeMenu:!1,startTimeModel:!1,startTime:null,endTimeMenu:!1,endTimeModel:!1,endTime:null,teacher:null,status:null,showStatus:"",subject:[{subjectID:null,subjectName:null,medium:null}],category:[{categoryID:null,categoryName:null}],nameRules:[e=>!!e||"Class name is required",e=>e&&e.length>3||"Name must be greater than 3"],feeTypeRules:[e=>!!e||"Fee type is required"],locationRules:[e=>!!e||"Location is required"],dayRules:[e=>!!e||"Day is required"],timeRules:[e=>!!e||"Time is required"],feeRules:[e=>!!e||"Fee is required",e=>/^\d{0,8}(\.\d{1,4})?$/.test(e)||"Invalid fee",e=>0!=e],teacherRules:[e=>!!e||"Teacher is required"],subjectRules:[e=>!!e||"Subject is required"],gradeRules:[e=>!!e||"Grade is required"],location:[],subjects:[],categories:[],teachers:[],day:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],feeType:["Monthly","Daily"],grade:["1","2","3","4","5","6","7","8","9","10","11","12","13","Other"],multiLine:!0,unsuccessfulCreateClass:!1}},methods:{classStatus(){0==this.status?this.showStatus="Active":1==this.status&&(this.showStatus="Deactivate")},getClassDetails(){this.axios.get(this.$apiUrl+"/api/v1.0/ClassManagement/classes/"+this.classDetails.classID).then(e=>{this.teacher=e.data.class.data[0].teacher.teacherID,this.getLocation=e.data.class.data[0].room,this.getDay=e.data.class.data[0].day,this.getFeeType=e.data.class.data[0].feeType,this.className=e.data.class.data[0].className,this.category=e.data.class.data[0].category,this.subject=e.data.class.data[0].subject,this.getGrade=e.data.class.data[0].grade,this.startTime=this.changeTimeFormat(e.data.class.data[0].startTime),this.endTime=this.changeTimeFormat(e.data.class.data[0].endTime),"Active"==e.data.class.data[0].status?(this.status=!1,this.showStatus="Active"):(this.status=!0,this.showStatus="Deactivate");const t=e.data.class.data[0].classFee;this.fee=t.split(".")[0]})},createClassName(){this.className=this.subject.subjectName+"/Grd"+this.getGrade+"/"+this.getDay+"/"+this.startTime},getClassHall(){const e=JSON.parse(localStorage.getItem("user"));this.axios.get(this.$apiUrl+"/api/v1.0/BranchManagement/branches/"+e.employee.branch.branchID).then(e=>{for(var t=e.data.branch.data[0].noOfRooms,a=1;a<=t;a++)this.location.push("Room No. "+a);this.location.push("Online")})},getTeachers(){this.axios.get(this.$apiUrl+"/api/v1.0/TeacherManagement/teachers",{params:{status:"Active"}}).then(e=>(this.teachers=e.data.teacher.data,this.teachers.forEach(e=>{e.firstName=e.title+" "+e.firstName+" "+e.lastName})))},Reset(){this.$refs.form.reset()},scrollToTop(){window.scrollTo(0,0)},teacherFilter(e,t){const a=e.firstName.toLowerCase(),s=e.teacherID.toLowerCase(),i=t.toLowerCase();return a.indexOf(i)>-1||s.indexOf(i)>-1},changeTimeFormat(e){const t=e;var a,s;const i=t.split(" "),l=i[1],r=i[0].split(":"),n=r[0];return s=r[1],"PM"==l?"01"==n?a="13":"02"==n?a="14":"03"==n?a="15":"04"==n?a="16":"05"==n?a="17":"06"==n?a="18":"07"==n?a="19":"08"==n?a="20":"09"==n?a="21":"10"==n?a="22":"11"==n?a="23":"12"==n&&(a="00"):a=r[0],a+":"+s},updateClass(){if(this.$refs.form.validate()){const e=JSON.parse(localStorage.getItem("user"));this.loading=!0,this.axios.patch(this.$apiUrl+"/api/v1.0/ClassManagement/classes/"+this.classDetails.classID,{className:this.className,day:this.getDay,startTime:this.startTime,endTime:this.endTime,grade:this.getGrade,room:this.getLocation,classFee:this.fee+".00",feeType:this.getFeeType,status:this.showStatus,subjectID:this.subject.subjectID,categoryID:this.category.categoryID,teacherID:this.teacher,branchID:e.employee.branch.branchID}).then(e=>{1==e.data.success?("Active"==this.showStatus?this.changeStudentEnrollmentStatus("1"):"Deactivate"==this.showStatus&&this.changeStudentEnrollmentStatus("0"),this.loading=!1,this.dialog=!1,this.Reset(),this.successAlert()):this.failedAlert()}).catch(e=>{this.failedAlert(),console.log(e.data),this.loading=!1})}},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)},changeStudentEnrollmentStatus(e){this.axios.patch(this.$apiUrl+"/api/v1.0/EnrollmentManagement/classes/"+this.classDetails.classID+"/students",{status:e}).then(t=>{t.data.success,console.log(e)}).catch(e=>{console.log(e.data),console.log("fail")})}}}),x=C,k=a("2877"),D=Object(k["a"])(x,y,T,!1,null,null,null);t["a"]=D.exports},"848e":function(e,t,a){"use strict";var s=a("8336"),i=a("b0af"),l=a("99d9"),r=a("a523"),n=a("169a"),o=a("132d"),c=a("0fd9"),u=a("2fa4"),d=function(){var e=this,t=e._self._c;return t(c["a"],{attrs:{justify:"start"}},[t(n["a"],{attrs:{persistent:"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(s["a"],e._g(e._b({staticClass:"error",attrs:{fab:"",dark:"","x-small":"",depressed:""}},"v-btn",i,!1),a),[t(o["a"],{attrs:{dark:""}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(i["a"],[t(r["a"],{staticClass:"text-center"},[t(l["d"],[t(c["a"],{attrs:{justify:"center"}},[t(o["a"],{attrs:{size:"100",color:"error"}},[e._v("mdi-help-circle-outline")])],1)],1),t("span",{staticClass:"text-h6 text-center"},[e._v("Do you really want to delete "),t("br"),e._v(" "),t("strong",[e._v('"'+e._s(e.classDetails.className)+'"')])])],1),t(l["a"],[t(u["a"]),t(s["a"],{attrs:{color:"grey",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),t(s["a"],{attrs:{loading:e.loading,color:"error",depressed:""},on:{click:function(t){return e.deleteClass()}}},[e._v("Delete "),t(o["a"],{attrs:{right:""}},[e._v("mdi-delete")])],1)],1)],1)],1)],1)},h=[],m={props:["classDetails"],data:()=>({dialog:!1,loading:!1}),methods:{deleteClass(){this.loading=!0,this.axios.delete(this.$apiUrl+"/api/v1.0/ClassManagement/classes/"+this.classDetails.classID).then(e=>{1==e.data.success?(this.dialog=!1,this.successAlert(),this.loading=!1):this.failedAlert()}).catch(e=>{this.loading=!1,this.failedAlert(),console.log(e.data)})},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)}}},p=m,g=a("2877"),f=Object(g["a"])(p,d,h,!1,null,null,null);t["a"]=f.exports},"9d01":function(e,t,a){},b73d:function(e,t,a){"use strict";a("ec29"),a("9d01");var s=a("fe09"),i=a("c37a"),l=a("c3f0"),r=a("0789"),n=a("490a"),o=a("80d2");t["a"]=s["a"].extend({name:"v-switch",directives:{Touch:l["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...i["a"].options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:e,...t}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...t}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(r["c"],{},[!1===this.loading?null:Object(o["s"])(this,"progress")||this.$createElement(n["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(e){(e.keyCode===o["x"].left&&this.isActive||e.keyCode===o["x"].right&&!this.isActive)&&this.onChange()}}})},ec29:function(e,t,a){},fe09:function(e,t,a){"use strict";a.d(t,"b",(function(){return n}));a("14d9");var s=a("c37a"),i=a("5311"),l=a("8547"),r=a("58df");function n(e){e.preventDefault()}t["a"]=Object(r["a"])(s["a"],i["a"],l["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const e=this.value,t=this.internalValue;return this.isMultiple?!!Array.isArray(t)&&t.some(t=>this.valueComparator(t,e)):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,t):Boolean(t):this.valueComparator(t,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel(){const e=s["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:n},e):e},genInput(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:n},ref:"input"})},onClick(e){this.onChange(),this.$emit("click",e)},onChange(){if(!this.isInteractive)return;const e=this.value;let t=this.internalValue;if(this.isMultiple){Array.isArray(t)||(t=[]);const a=t.length;t=t.filter(t=>!this.valueComparator(t,e)),t.length===a&&t.push(e)}else t=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(t,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(t,e)?null:e:!t;this.validate(!0,t),this.internalValue=t,this.hasColor=t},onFocus(e){this.isFocused=!0,this.$emit("focus",e)},onBlur(e){this.isFocused=!1,this.$emit("blur",e)},onKeydown(e){}}})}}]);
//# sourceMappingURL=chunk-381e0fd5.551a5b74.js.map
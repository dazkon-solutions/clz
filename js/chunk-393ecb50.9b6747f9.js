(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-393ecb50"],{1681:function(e,t,a){},"2b85":function(e,t,a){"use strict";a.r(t);var s=a("2bc5"),n=a("8336"),i=a("b0af"),r=a("99d9"),l=a("62ad"),o=a("a523"),c=a("8fea"),u=a("2e4b"),d=a("169a"),p=a("4bd4"),m=a("132d"),h=a("e449"),f=a("0fd9"),x=a("2db4"),g=a("2fa4"),v=a("8654"),b=a("a844"),k=function(){var e=this,t=e._self._c;return t("div",[t(s["a"],{attrs:{items:e.breadcrumbs},scopedSlots:e._u([{key:"divider",fn:function(){return[t(m["a"],[e._v("mdi-chevron-right")])]},proxy:!0}])}),t(o["a"],[t(x["a"],{attrs:{timeout:3e3,color:"red",bottom:""},model:{value:e.unsuccessAlert,callback:function(t){e.unsuccessAlert=t},expression:"unsuccessAlert"}},[t(m["a"],{attrs:{left:""}},[e._v("mdi-alert-outline")]),e._v("Item delete "),t("strong",[e._v("failed")])],1),t(x["a"],{attrs:{timeout:3e3,color:"green",bottom:""},model:{value:e.successAlert,callback:function(t){e.successAlert=t},expression:"successAlert"}},[t(m["a"],{attrs:{left:""}},[e._v("mdi-check")]),e._v("Item delete "),t("strong",[e._v("successful")])],1),t(x["a"],{attrs:{timeout:3e3,color:"red",bottom:""},model:{value:e.unsuccessAlertPayment,callback:function(t){e.unsuccessAlertPayment=t},expression:"unsuccessAlertPayment"}},[t(m["a"],{attrs:{left:""}},[e._v("mdi-alert-outline")]),e._v("Mark expenditure "),t("strong",[e._v("failed")])],1),t(x["a"],{attrs:{timeout:3e3,color:"green",bottom:""},model:{value:e.successAlertPayment,callback:function(t){e.successAlertPayment=t},expression:"successAlertPayment"}},[t(m["a"],{attrs:{left:""}},[e._v("mdi-check")]),e._v("Mark expenditure "),t("strong",[e._v("successful")])],1),t(x["a"],{attrs:{timeout:3e3,color:"red",bottom:""},model:{value:e.unsuccessAlertUpdate,callback:function(t){e.unsuccessAlertUpdate=t},expression:"unsuccessAlertUpdate"}},[t(m["a"],{attrs:{left:""}},[e._v("mdi-alert-outline")]),e._v("Expenditure update "),t("strong",[e._v("failed")])],1),t(x["a"],{attrs:{timeout:3e3,color:"green",bottom:""},model:{value:e.successAlertUpdate,callback:function(t){e.successAlertUpdate=t},expression:"successAlertUpdate"}},[t(m["a"],{attrs:{left:""}},[e._v("mdi-check")]),e._v("Expenditure update "),t("strong",[e._v("successful")])],1),[t(f["a"],{staticStyle:{padding:"12px"}},[t(l["a"],{attrs:{lg:"4",md:"6",sm:"6",cols:"12","max-width":"700"}},[t(p["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(i["a"],{staticClass:"pb-5"},[t(f["a"],{staticClass:"px-5 pb-1",attrs:{justify:"center",dense:""}},[t(r["d"],{staticClass:"blue-grey--text text--darken-2"},[e._v("Mark Expenditures")]),t(l["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[t(v["a"],{attrs:{rules:e.amountRules,clearable:"",label:"Amount",prefix:"RS.",placeholder:".00"},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),t(l["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[t(b["a"],{attrs:{rules:e.descriptionRules,rows:"2",label:"Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),t(l["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[[t("div",[t(h["a"],{ref:"menud",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(v["a"],e._g(e._b({attrs:{label:"Date",readonly:"",rules:e.dateRules},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},"v-text-field",s,!1),a))]}}]),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[t(u["a"],{attrs:{"active-picker":e.dateActivePicker,max:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),min:"1950-01-01"},on:{"update:activePicker":function(t){e.dateActivePicker=t},"update:active-picker":function(t){e.dateActivePicker=t}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1)]],2)],1),t(r["a"],{staticClass:"px-6"},[t(n["a"],{attrs:{depressed:"",color:"primary",block:"",disabled:!e.valid||!e.description||!e.amount||!e.date},on:{click:function(t){e.dialog=!0}}},[e._v("Mark as expenditure")])],1)],1)],1)],1),t(l["a"],[t(i["a"],{attrs:{flat:""}},[t(r["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[e._v("Expenditure Details "),t(g["a"]),t(h["a"],{ref:"menud",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(v["a"],e._g(e._b({attrs:{label:"Date",readonly:"",hint:"*Select Month to search for a previous month's Details","persistent-hint":"","single-line":""},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},"v-text-field",s,!1),a))]}}]),model:{value:e.monthMenu,callback:function(t){e.monthMenu=t},expression:"monthMenu"}},[t(u["a"],{attrs:{type:"month"},on:{input:function(t){e.monthMenu=!1,e.getExpenditures()}},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1)],1),t(r["d"],[t(g["a"]),t(v["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.Search,callback:function(t){e.Search=t},expression:"Search"}})],1),t(c["a"],{attrs:{headers:e.headers,items:e.expenditures,search:e.Search,"items-per-page":5},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(r["a"],[t("app-EditExpenditure",{attrs:{expenditure:a},on:{success:function(t){return e.updateSuccessAlert(t)},failed:function(t){return e.updateFaileAlert(t)}}}),t(g["a"]),t("app-DeleteExpenditure",{staticClass:"ml-5",attrs:{expenditure:a},on:{success:function(t){return e.deleteAlert(t)},failed:function(t){return e.FaileAlert(t)}}})],1)]}}],null,!0)})],1)],1)],1)],t(d["a"],{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(i["a"],[t(o["a"],{staticClass:"text-center"},[t(r["d"],[t(f["a"],{attrs:{justify:"center"}},[t(m["a"],{attrs:{size:"100",color:"orange"}},[e._v("mdi-alert-circle-outline")])],1)],1),t("span",{staticClass:"text-h6 text-center"},[e._v(" Confirm Expenditure Details")]),t(r["c"],[e._v("Amount: Rs. "+e._s(e.amount)+" "),t("br"),e._v("Description: "+e._s(e.description)+" "),t("br"),e._v("Date: "+e._s(e.date)+" ")])],1),t(r["a"],[t(g["a"]),t(n["a"],{attrs:{color:"grey",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),t(n["a"],{attrs:{loading:e.loading,color:"orange",dark:"",depressed:""},on:{click:function(t){return e.markExpense()}}},[e._v("Confirm")])],1)],1)],1)],2)],1)},A=[],_=a("ce7e"),y=function(){var e=this,t=e._self._c;return t(f["a"],[t(d["a"],{attrs:{scrollable:"","max-width":"500px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(n["a"],e._g(e._b({staticClass:"teal",attrs:{small:"",dark:"",depressed:""},on:{click:function(t){return e.getExpenditures()}}},"v-btn",s,!1),a),[e._v("Edit"),t(m["a"],{attrs:{dark:"",right:""}},[e._v("mdi-pencil")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(p["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(i["a"],{attrs:{"max-width":"700",flat:""}},[t(r["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[e._v("Edit Expenduture")]),t(_["a"]),t(r["c"],{staticStyle:{height:"800px"}},[t(l["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[t(v["a"],{attrs:{rules:e.amountRules,clearable:"",label:"Amount",prefix:"RS."},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),t(l["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[t(b["a"],{attrs:{rules:e.descriptionRules,rows:"2",label:"Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),t(l["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[[t("div",[t(h["a"],{ref:"menud",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(v["a"],e._g(e._b({attrs:{label:"Date",readonly:"",rules:e.dateRules},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},"v-text-field",s,!1),a))]}}]),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[t(u["a"],{attrs:{"active-picker":e.dateActivePicker,max:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),min:"1950-01-01"},on:{"update:activePicker":function(t){e.dateActivePicker=t},"update:active-picker":function(t){e.dateActivePicker=t}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1)]],2)],1),t(_["a"]),t(r["a"],[t(g["a"]),t(n["a"],{attrs:{outlined:"",color:"grey"},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),t(n["a"],{attrs:{loading:e.loading,disabled:!e.valid,color:"primary",depressed:""},on:{click:function(t){return e.updateExpense()}}},[e._v("Save "),t(m["a"],{attrs:{left:""}},[e._v("mdi-content-save")])],1)],1)],1)],1)],1)],1)},D=[],w={props:["expenditure"],data(){return{dialog:!1,loading:!1,valid:!0,Search:"",dateActivePicker:null,date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateMenu:!1,monthActivePicker:null,month:(new Date).getFullYear()+"-"+String((new Date).getMonth()+1).padStart(2,"0"),monthMenu:!1,amount:"0",description:"",descriptionRules:[e=>!!e||"Description is required",e=>e&&e.length>5||"Description must be greater than 5"],amountRules:[e=>!!e||"Amount is required",e=>/^\d+$/.test(e)||"Must be a number"],dateRules:[e=>!!e||"Join Date is required"]}},methods:{getExpenditures(){this.axios.get(this.$apiUrl+"/api/v1.0/ExpenditureManagement/expenditures/"+this.expenditure.expenseID).then(e=>{this.description=e.data.expense.data[0].expense,this.date=e.data.expense.data[0].date;const t=e.data.expense.data[0].expenseAmount.split(".");this.amount=t[0]})},updateExpense(){if(this.$refs.form.validate()){const e=JSON.parse(localStorage.getItem("user"));this.loading=!0,this.axios.patch(this.$apiUrl+"/api/v1.0/ExpenditureManagement/expenditures/"+this.expenditure.expenseID,{expense:this.description,expenseAmount:this.amount+".00",date:this.date,handlerStaffID:e.employee.employeeID,branchID:e.employee.branch.branchID}).then(e=>{1==e.data.success?(this.successAlert(),this.dialog=!1,this.loading=!1):this.failedAlert()}).catch(e=>{this.failedAlert(),console.log(e.data),this.loading=!1})}},Reset(){this.$refs.form.reset()},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)}}},S=w,E=(a("ac76"),a("2877")),I=Object(E["a"])(S,y,D,!1,null,"1cf2f0ad",null),M=I.exports,P=function(){var e=this,t=e._self._c;return t(f["a"],[t(d["a"],{attrs:{persistent:"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(n["a"],e._g(e._b({staticClass:"error",attrs:{fab:"",dark:"","x-small":"",depressed:""}},"v-btn",s,!1),a),[t(m["a"],{attrs:{dark:""}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(i["a"],[t(o["a"],{staticClass:"text-center"},[t(r["d"],[t(f["a"],{attrs:{justify:"center"}},[t(m["a"],{attrs:{size:"100",color:"error"}},[e._v("mdi-help-circle-outline")])],1)],1),t("span",{staticClass:"text-h6 text-center"},[e._v("Do you really want to delete "),t("br"),e._v(" "),t("strong",[e._v('"Expenditure"')])])],1),t(r["a"],[t(g["a"]),t(n["a"],{attrs:{color:"grey",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),t(n["a"],{attrs:{loading:e.loading,color:"error",depressed:""},on:{click:function(t){return e.deleteExpenditure()}}},[e._v("Delete "),t(m["a"],{attrs:{right:""}},[e._v("mdi-delete")])],1)],1)],1)],1)],1)},R=[],C={props:["expenditure"],data:()=>({dialog:!1,loading:!1,logedUser:JSON.parse(localStorage.getItem("user"))}),methods:{deleteExpenditure(){this.loading=!0,this.axios.delete(this.$apiUrl+"/api/v1.0/ExpenditureManagement/expenditures/"+this.expenditure.expenseID,{params:{handlerStaffID:this.logedUser.employee.employeeID}}).then(e=>{1==e.data.success?(this.successAlert(),this.dialog=!1,this.loading=!1):this.failedAlert()}).catch(e=>{this.loading=!1,this.failedAlert(),console.log(e.data)})},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)}}},$=C,U=Object(E["a"])($,P,R,!1,null,null,null),O=U.exports,z={components:{"app-EditExpenditure":M,"app-DeleteExpenditure":O},data(){return{dialog:!1,loading:!1,valid:!0,Search:"",dateActivePicker:null,date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateMenu:!1,monthActivePicker:null,month:(new Date).getFullYear()+"-"+String((new Date).getMonth()+1).padStart(2,"0"),monthMenu:!1,amount:"0",description:"",headers:[{text:"ID",align:"start",sortable:!1,value:"expenseID"},{text:"DATE",sortable:!1,value:"date"},{text:"ADVANCE",sortable:!1,value:"expenseAmount"},{text:"DESCRIPTION",sortable:!1,value:"expense"},{text:"STAFF",sortable:!1,value:"handledBy.staffName"},{text:"",sortable:!1,value:"actions"}],expenditures:[],breadcrumbs:[{text:"Financial",disabled:!1,href:"/Financial"},{text:"Expenditure",disabled:!0,href:"/Financial/Expenditure"}],descriptionRules:[e=>!!e||"Description is required",e=>e&&e.length>5||"Description must be greater than 5"],amountRules:[e=>!!e||"Amount is required",e=>/^\d+$/.test(e)||"Must be a number"],dateRules:[e=>!!e||"Join Date is required"],successAlert:!1,unsuccessAlert:!1,unsuccessAlertUpdate:!1,successAlertUpdate:!1,unsuccessAlertPayment:!1,successAlertPayment:!1}},created(){this.getExpenditures()},methods:{getExpenditures(){this.axios.get(this.$apiUrl+"/api/v1.0/ExpenditureManagement/expenditures",{params:{date:this.month}}).then(e=>this.expenditures=e.data.expense.data)},markExpense(){if(this.$refs.form.validate()){const e=JSON.parse(localStorage.getItem("user"));this.loading=!0,0!=this.amount?this.axios.post(this.$apiUrl+"/api/v1.0/ExpenditureManagement/expenditures",{expense:this.description,expenseAmount:this.amount+".00",date:this.date,handlerStaffID:e.employee.employeeID,branchID:e.employee.branch.branchID}).then(e=>{1==e.data.success?(this.Reset(),this.dialog=!1,this.getExpenditures(),this.successAlertPayment=!0,this.loading=!1):(this.unsuccessAlertPayment=!0,this.loading=!1)}).catch(e=>{this.unsuccessAlertPayment=!0,console.log(e.data),this.loading=!1}):(this.unsuccessAlertPayment=!0,this.loading=!1)}},Reset(){this.$refs.form.reset()},deleteAlert(e){this.successAlert=e,this.getExpenditures()},faileAlert(e){this.unsuccessAlert=e},updateSuccessAlert(e){this.successAlertUpdate=e,this.getExpenditures()},updateFaileAlert(e){this.unsuccessAlertUpdate=e}}},F=z,H=(a("cb3f"),Object(E["a"])(F,k,A,!1,null,"05be68aa",null));t["default"]=H.exports},a844:function(e,t,a){"use strict";a("1681");var s=a("8654"),n=a("58df");const i=Object(n["a"])(s["a"]);t["a"]=i.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...s["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(e){this.$nextTick(()=>{var t;e?this.calculateInputHeight():null===(t=this.$refs.input)||void 0===t||t.style.removeProperty("height")})},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(a,t)+"px"},genInput(){const e=s["a"].options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){s["a"].options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},ac76:function(e,t,a){"use strict";a("c40d")},c40d:function(e,t,a){},cb3f:function(e,t,a){"use strict";a("d06c")},d06c:function(e,t,a){}}]);
//# sourceMappingURL=chunk-393ecb50.9b6747f9.js.map
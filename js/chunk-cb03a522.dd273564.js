(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb03a522"],{"4ae6":function(t,s,a){"use strict";a.r(s);var e=a("2bc5"),l=a("8336"),r=a("b0af"),i=a("99d9"),c=a("cc20"),n=a("62ad"),o=a("a523"),d=a("132d"),u=a("a797"),h=a("490a"),v=a("0fd9"),m=a("2db4"),g=a("2fa4"),_=function(){var t=this,s=t._self._c;return s("div",[s(e["a"],{attrs:{items:t.breadcrumbs},scopedSlots:t._u([{key:"divider",fn:function(){return[s(d["a"],[t._v("mdi-chevron-right")])]},proxy:!0}])}),s(u["a"],{attrs:{value:t.overlay}},[s("div",{staticClass:"text-center"},[t.overlayMessage?s("div",[s(h["a"],{attrs:{indeterminate:"",size:"64"}}),s("br"),s("br"),s("p",[t._v("Please wait..")])],1):s("div",[s("p",[t._v("It seems spent more time. Please refresh!")]),s(l["a"],{staticClass:"black--text",attrs:{color:"white",depressed:""},on:{click:function(s){return t.reloadPage()}}},[t._v("click here")])],1)])]),s(o["a"],[s(m["a"],{attrs:{timeout:5e3,color:"red",bottom:""},model:{value:t.startUnsuccessAlert,callback:function(s){t.startUnsuccessAlert=s},expression:"startUnsuccessAlert"}},[s(d["a"],{attrs:{left:""}},[t._v("mdi-alert-outline")]),t._v(" Class start "),s("strong",[t._v("failed")])],1),s(m["a"],{attrs:{timeout:5e3,color:"red",bottom:""},model:{value:t.unsuccessAlert,callback:function(s){t.unsuccessAlert=s},expression:"unsuccessAlert"}},[s(d["a"],{attrs:{left:""}},[t._v("mdi-alert-outline")]),t._v(" Class cancel "),s("strong",[t._v("failed")])],1),s(m["a"],{attrs:{timeout:5e3,color:"green",bottom:""},model:{value:t.successAlert,callback:function(s){t.successAlert=s},expression:"successAlert"}},[s(d["a"],{attrs:{left:""}},[t._v("mdi-check")]),t._v("Class cancel "),s("strong",[t._v("successful")])],1),s(m["a"],{attrs:{"multi-line":t.multiLine},scopedSlots:t._u([{key:"action",fn:function({attrs:a}){return[s(l["a"],t._b({attrs:{color:"red",text:""},on:{click:function(s){t.classStartAlert=!1}}},"v-btn",a,!1),[t._v("Close")])]}}]),model:{value:t.classStartAlert,callback:function(s){t.classStartAlert=s},expression:"classStartAlert"}},[t._v(" Class start successfully. Now you can mark "),s("strong",[t._v("Attendance")]),t._v(" . ")]),[s(r["a"],{directives:[{name:"show",rawName:"v-show",value:t.startedClassDetails.length>0,expression:"startedClassDetails.length>0"}],staticClass:"blue-grey lighten-5",attrs:{flat:"",outlined:"",color:"red"}},[s(i["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[t._v("Started Classes")]),s(v["a"],{staticClass:"pa-5"},t._l(t.startedClassDetails,(function(a){return s(n["a"],{key:a.classID,attrs:{lg:"4",md:"4",sm:"6",cols:"12"}},[s(r["a"],{attrs:{flat:""}},[s(i["d"],{staticClass:"mb-2",staticStyle:{background:"#006994"}},[a.subject.subjectName.length<18?s("div",{staticClass:"title white--text"},[t._v(t._s(a.subject.subjectName))]):s("div",{staticClass:"title white--text"},[t._v(t._s(a.subject.subjectName.substring(0,16)+".. "))]),s(g["a"]),s("div",{staticClass:"subtitle-1 white--text"},[s(c["a"],{attrs:{small:""}},[t._v("Grade:"+t._s(a.grade)+" ")])],1)],1),s(i["c"],[s(d["a"],{attrs:{left:""}},[t._v("mdi-clock")]),t._v(" "+t._s(a.time)+" "),s("br"),s(d["a"],{attrs:{left:""}},[t._v("mdi-home")]),s(c["a"],{attrs:{small:"",outlined:""}},[t._v(t._s(a.room))]),t._v(" "),s("br"),a.teacher.teacherName.length<28?s("div",[s(d["a"],{attrs:{left:""}},[t._v("mdi-account")]),t._v(t._s(a.teacher.teacherName))],1):s("div",[s(d["a"],{attrs:{left:""}},[t._v("mdi-account")]),t._v(t._s(a.teacher.teacherName.substring(0,28)+".. "))],1)],1),s(i["a"],{staticClass:"pb-5"},["Daily"==a.feeType?s(l["a"],{attrs:{to:{path:"/Attendance/TodayClasses/MarkAttendanceDailyFee/"+a.classID},color:"primary",dark:"",outlined:""}},[t._v("Mark Attendance")]):s(l["a"],{attrs:{to:{path:"/Attendance/TodayClasses/MarkAttendanceMonthlyFee/"+a.classID},color:"primary",dark:"",outlined:""}},[t._v("Mark Attendance")]),s(g["a"]),s("app-CancelClass",{staticClass:"mr-1",attrs:{todayDate:t.todayDate,classDetails:a},on:{success:function(s){return t.cancelAlert(s)},failed:function(s){return t.faileAlert(s)}}})],1)],1)],1)})),1)],1)],[s(r["a"],{directives:[{name:"show",rawName:"v-show",value:t.newClassDetails.length>0,expression:"newClassDetails.length>0"}],staticClass:"mt-6 blue-grey lighten-5",attrs:{flat:""}},[s(i["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[t._v("Scheduled Classes")]),s(v["a"],{staticClass:"pa-5"},t._l(t.newClassDetails,(function(a){return s(n["a"],{key:a.classID,attrs:{lg:"4",md:"4",sm:"6",cols:"12"}},[s(r["a"],{attrs:{flat:""}},[s(i["d"],{staticClass:"mb-2",staticStyle:{background:"#43A047"}},[a.subject.subjectName.length<18?s("div",{staticClass:"title white--text"},[t._v(t._s(a.subject.subjectName))]):s("div",{staticClass:"title white--text"},[t._v(t._s(a.subject.subjectName.substring(0,16)+".. "))]),s(g["a"]),s("div",{staticClass:"subtitle-1 white--text"},[s(c["a"],{attrs:{small:""}},[t._v("Grade:"+t._s(a.grade)+" ")])],1)],1),s(i["c"],[s(d["a"],{attrs:{left:""}},[t._v("mdi-clock")]),t._v(" "+t._s(a.time)+" "),s("br"),s(d["a"],{attrs:{left:""}},[t._v("mdi-home")]),s(c["a"],{attrs:{small:"",outlined:""}},[t._v(t._s(a.room))]),t._v(" "),s("br"),a.teacher.teacherName.length<28?s("div",[s(d["a"],{attrs:{left:""}},[t._v("mdi-account")]),t._v(t._s(a.teacher.teacherName))],1):s("div",[s(d["a"],{attrs:{left:""}},[t._v("mdi-account")]),t._v(t._s(a.teacher.teacherName.substring(0,28)+".. "))],1)],1),s(i["a"],{staticClass:"pb-5"},[s(l["a"],{attrs:{depressed:"",block:"",dark:"",color:"#43A047"},on:{click:function(s){return t.startClass(a.classID)}}},[t._v("Start Class")])],1)],1)],1)})),1)],1)]],2)],1)},f=[],y=(a("14d9"),a("169a")),C=function(){var t=this,s=t._self._c;return s(v["a"],{attrs:{justify:"end"}},[s(y["a"],{attrs:{persistent:"","max-width":"400px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:e}){return[s(l["a"],t._g(t._b({attrs:{text:""}},"v-btn",e,!1),a),[t._v("Cancel")])]}}]),model:{value:t.dialog,callback:function(s){t.dialog=s},expression:"dialog"}},[s(r["a"],[s(o["a"],{staticClass:"text-center"},[s(i["d"],[s(v["a"],{attrs:{justify:"center"}},[s(d["a"],{attrs:{size:"100",color:"error"}},[t._v("mdi-help-circle-outline")])],1)],1),s("span",{staticClass:"text-h6 text-center"},[t._v("Do you really want to cancel "),s("br"),t._v(" "),s("strong",[t._v('"'+t._s(t.classDetails.className)+'"')])])],1),s(i["a"],[s(g["a"]),s(l["a"],{attrs:{color:"grey",outlined:""},on:{click:function(s){t.dialog=!1}}},[t._v("No")]),s(l["a"],{attrs:{loading:t.loading,color:"error",depressed:""},on:{click:function(s){return t.cancelClass()}}},[t._v("Yes")])],1)],1)],1)],1)},p=[],b={props:["classDetails","todayDate"],data:()=>({dialog:!1,loading:!1}),methods:{cancelClass(){this.loading=!0,this.axios.delete(this.$apiUrl+"/api/v1.0/AttendanceManagement/attendances/classes/"+this.classDetails.classID,{data:{date:this.todayDate}}).then(t=>{1==t.data.success?(this.dialog=!1,this.successAlert(),this.loading=!1):this.failedAlert()}).catch(t=>{this.failedAlert(),console.log(t),this.loading=!1})},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)}}},D=b,A=(a("6ba7"),a("2877")),x=Object(A["a"])(D,C,p,!1,null,"3c990a86",null),k=x.exports,w={components:{"app-CancelClass":k},data(){return{overlay:!1,enrolledClasses:[],classDetails:[],startedClasses:[],startedClassDetails:[],newClassDetails:[],todayDate:"",todayDay:"",breadcrumbs:[{text:"Attendance",disabled:!1,href:"/Attendance"},{text:"Today Classes",disabled:!0,href:"/Attendance/TodayClasses"}],multiLine:!0,classStartAlert:!1,successAlert:!1,unsuccessAlert:!1,startUnsuccessAlert:!1,overlayMessage:!0}},created(){this.overlay=!0,this.getTodayDate(),this.getTodayDay(),this.getEnrolledClassDetails(),setTimeout(()=>{0!=this.overlay&&(this.overlayMessage=!1)},5e3)},methods:{reloadPage(){location.reload()},getEnrolledClassDetails(){this.overlayMessage=!0,this.classDetails.splice(0),this.startedClassDetails.splice(0),this.newClassDetails.splice(0);var t=[];this.axios.get(this.$apiUrl+"/api/v1.0/ClassManagement/classes",{params:{status:"Active",day:this.todayDay}}).then(s=>(t=s.data.class.data,t.forEach(t=>{t.time=t.startTime+"-"+t.endTime}))).then(this.axios.get(this.$apiUrl+"/api/v1.0/EnrollmentManagement/classes").then(s=>(this.enrolledClasses=s.data.enrollment.data,t.forEach(t=>{var s=t.classID,a=t;this.enrolledClasses.forEach(t=>{t.classID==s&&this.classDetails.push(a)})})))).then(this.axios.get(this.$apiUrl+"/api/v1.0/AttendanceManagement/attendances",{params:{date:this.todayDate}}).then(t=>(this.startedClasses=t.data.attendance.data,this.classDetails.forEach(t=>{var s=t,a=t.classID;0==this.startedClasses.length?(this.newClassDetails.push(s),this.overlay=!1):this.startedClasses.forEach(t=>{t.classID==a&&this.startedClassDetails.push(s),this.overlay=!1})}),this.classDetails.forEach(t=>{var s=t,a=t.classID,e=[],l=[];if(0!=this.startedClasses.length){this.startedClasses.forEach(t=>{e.push(t.classID)}),this.classDetails.forEach(t=>{l.push(t.classID)}),e.sort(),l.sort();let t=l.filter(t=>-1===e.indexOf(t));t.forEach(t=>{t==a&&this.newClassDetails.push(s),this.overlay=!1})}}))))},getTodayDate(){var t=new Date,s=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),e=t.getFullYear();this.todayDate=e+"-"+a+"-"+s},getTodayDay(){const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=new Date;var a=t[s.getDay()];this.todayDay=a},startClass(t){this.overlay=!0,this.axios.post(this.$apiUrl+"/api/v1.0/AttendanceManagement/attendances/classes",{classID:t}).then(t=>{1==t.data.success?(this.classStartAlert=!0,this.getEnrolledClassDetails()):this.startUnsuccessAlert=!0}).catch(t=>{this.startUnsuccessAlert=!0,console.log(t.data)})},cancelAlert(t){this.overlay=!0,this.successAlert=t,this.getEnrolledClassDetails()},faileAlert(t){this.unsuccessAlert=t}}},S=w,N=Object(A["a"])(S,_,f,!1,null,null,null);s["default"]=N.exports},"6ba7":function(t,s,a){"use strict";a("d83e")},d83e:function(t,s,a){}}]);
//# sourceMappingURL=chunk-cb03a522.dd273564.js.map
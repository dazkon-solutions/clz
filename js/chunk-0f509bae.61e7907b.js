(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f509bae"],{"0eed":function(e,a,t){},e82e:function(e,a,t){"use strict";t.r(a);var s=t("2bc5"),l=t("b0af"),i=t("99d9"),r=t("a523"),c=t("8fea"),n=t("132d"),o=t("2db4"),d=t("2fa4"),u=t("8654"),m=function(){var e=this,a=e._self._c;return a("div",[a(s["a"],{attrs:{items:e.breadcrumbs},scopedSlots:e._u([{key:"divider",fn:function(){return[a(n["a"],[e._v("mdi-chevron-right")])]},proxy:!0}])}),a(r["a"],[a(o["a"],{attrs:{timeout:3e3,color:"red",bottom:""},model:{value:e.unsuccessAlert,callback:function(a){e.unsuccessAlert=a},expression:"unsuccessAlert"}},[a(n["a"],{attrs:{left:""}},[e._v("mdi-alert-outline")]),e._v(" Class delete "),a("strong",[e._v("failed")])],1),a(o["a"],{attrs:{timeout:3e3,color:"green",bottom:""},model:{value:e.successAlert,callback:function(a){e.successAlert=a},expression:"successAlert"}},[a(n["a"],{attrs:{left:""}},[e._v("mdi-check")]),e._v("Class delete "),a("strong",[e._v("successful")])],1),[a(l["a"],{attrs:{flat:""}},[a(i["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[e._v("Exam Details")]),a(i["d"],[a(d["a"]),a(u["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}})],1),[a("div",[a(c["a"],{attrs:{headers:e.headers,items:e.exams,search:e.search},scopedSlots:e._u([{key:"item.actions",fn:function({item:t}){return[a(i["a"],[a("app-ViewExamDetails",{attrs:{examDetails:t},on:{success:function(a){return e.reCreate(a)}}}),a(d["a"]),a("app-DeleteExam",{staticClass:"ml-5",attrs:{examDetails:t},on:{success:function(a){return e.deleteAlert(a)},failed:function(a){return e.faileAlert(a)}}})],1)]}}],null,!0)})],1)]],2)]],2)],1)},h=[],x=(t("14d9"),t("8336")),g=t("62ad"),b=t("2e4b"),f=t("169a"),p=t("ce7e"),v=t("4bd4"),k=t("e449"),_=t("0fd9"),E=function(){var e=this,a=e._self._c;return a(_["a"],{attrs:{justify:"end"}},[a(f["a"],{attrs:{scrollable:"","max-width":"700px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(x["a"],e._g(e._b({staticClass:"primary",attrs:{dark:"",small:"",block:"",depressed:""},on:{click:function(a){return e.getExam()}}},"v-btn",s,!1),t),[e._v("view"),a(n["a"],{attrs:{dark:"",right:""}},[e._v("mdi-account")])],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(l["a"],{attrs:{"max-width":"700",flat:""}},[a(i["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[e._v("Exam - "+e._s(e.examDetails.exam)+" "),a(d["a"]),e.isEditing?e._e():a(x["a"],{attrs:{depressed:"",color:"blue-grey",dark:""},on:{click:function(a){e.isEditing=!e.isEditing}}},[e._v(" Edit "),a(n["a"],{attrs:{right:""}},[e._v("mdi-account-edit")])],1)],1),a(p["a"]),a(i["c"],[a(v["a"],{ref:"form",attrs:{"lazy-validation":"",readonly:!e.isEditing},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[a(_["a"],{staticStyle:{padding:"12px"}},[a(g["a"],[a("fieldset",{staticClass:"px-5 mb-3"},[a("legend",[a(i["c"],{staticClass:"grey--text"},[e._v("Exam Details")])],1),a(_["a"],{attrs:{dense:""}},[a(g["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[a(u["a"],{attrs:{label:"Exam Name","prepend-icon":"mdi-file-document-edit",rules:e.nameRules,required:""},model:{value:e.examName,callback:function(a){e.examName=a},expression:"examName"}})],1),a(g["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[a(u["a"],{attrs:{placeholder:"ex: 100",rules:e.markRules,label:"Total Mark","prepend-icon":"mdi-flag-triangle",required:"",maxlength:"3"},model:{value:e.totalMark,callback:function(a){e.totalMark=a},expression:"totalMark"}})],1),a(g["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[[a("div",[a(k["a"],{ref:"menu",attrs:{disabled:!e.isEditing,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(u["a"],e._g(e._b({attrs:{label:"Conducting Date","prepend-icon":"mdi-calendar",readonly:"",rules:e.dateRules},model:{value:e.date,callback:function(a){e.date=a},expression:"date"}},"v-text-field",s,!1),t))]}}]),model:{value:e.menu,callback:function(a){e.menu=a},expression:"menu"}},[a(b["a"],{attrs:{"active-picker":e.activePicker,min:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)},on:{input:function(a){e.menu=!1},"update:activePicker":function(a){e.activePicker=a},"update:active-picker":function(a){e.activePicker=a}},model:{value:e.date,callback:function(a){e.date=a},expression:"date"}})],1)],1)]],2)],1)],1),a("fieldset",{staticClass:"px-5"},[a("legend",[a(i["c"],{staticClass:"grey--text"},[e._v("Subject Details")])],1),a(_["a"],{attrs:{dense:""}},[a(g["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[a(u["a"],{attrs:{disabled:"","prepend-icon":"mdi-candy-outline"},model:{value:e.category.categoryName,callback:function(a){e.$set(e.category,"categoryName",a)},expression:"category.categoryName"}})],1),a(g["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[a(u["a"],{attrs:{disabled:"","prepend-icon":"mdi-format-align-center"},model:{value:e.subject.subjectName,callback:function(a){e.$set(e.subject,"subjectName",a)},expression:"subject.subjectName"}})],1)],1)],1),a("fieldset",{staticClass:"px-5 mb-3"},[a("legend",[a(i["c"],{staticClass:"grey--text"},[e._v("Class Details")])],1),a(_["a"],{attrs:{dense:""}},[a(g["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[a(u["a"],{attrs:{disabled:"","prepend-icon":"mdi-home-variant"},model:{value:e.classs.className,callback:function(a){e.$set(e.classs,"className",a)},expression:"classs.className"}})],1)],1)],1)])],1)],1)],1),a(p["a"]),a(i["a"],[a(d["a"]),e.isEditing?e._e():a(x["a"],{attrs:{color:"primary",depressed:""},on:{click:function(a){e.dialog=!1}}},[e._v("OK")]),e.isEditing?a(x["a"],{attrs:{outlined:"",color:"grey"},on:{click:function(a){e.cancelEdit(),e.getExam()}}},[e._v("Cancel")]):e._e(),e.isEditing?a(x["a"],{attrs:{loading:e.loading,disabled:!e.valid,depressed:"",color:"primary"},on:{click:function(a){return e.updateExam()}}},[e._v("Save "),a(n["a"],{attrs:{left:""}},[e._v("mdi-content-save")])],1):e._e()],1),a(o["a"],{attrs:{timeout:2e3,absolute:"",bottom:"",left:"",color:"green"},model:{value:e.hasSaved,callback:function(a){e.hasSaved=a},expression:"hasSaved"}},[e._v("Exam details has been updated")]),a(o["a"],{attrs:{timeout:3e3,color:"red",absolute:"",bottom:"",left:""},model:{value:e.hasNotSaved,callback:function(a){e.hasNotSaved=a},expression:"hasNotSaved"}},[a(n["a"],{attrs:{left:""}},[e._v("mdi-alert-outline")]),e._v("Update failed ")],1)],1)],1)],1)},y=[],D={props:["examDetails"],data(){return{valid:!0,dialog:!1,loading:!1,examName:"",totalMark:"",activePicker:null,date:null,menu:!1,category:[{categoryID:null,categoryName:null}],subject:[{subjectID:null,subjectName:null,medium:null}],classs:[{classID:null,className:null}],breadcrumbs:[{text:"Exams",disabled:!1,href:"/Exams"},{text:"CreateExams",disabled:!0,href:"/Exams/CreateExams"}],isEditing:null,hasSaved:!1,hasNotSaved:!1,markRules:[e=>!!e||"Total mark is required",e=>/^\d+$/.test(e)||"Must be a number",e=>0!=e||"must be greater than 0"],nameRules:[e=>!!e||"Class name is required",e=>e&&e.length>3||"Name must be greater than 3"],subjectRules:[e=>!!e||"This field is required"],dateRules:[e=>!!e||"Conducted date is required"]}},methods:{getExam(){this.axios.get(this.$apiUrl+"/api/v1.0/ExamManagement/exams/"+this.examDetails.examID).then(e=>{this.date=e.data.exam.data[0].date,this.totalMark=e.data.exam.data[0].totalMark,this.examName=e.data.exam.data[0].exam,this.category=e.data.exam.data[0].category,this.subject=e.data.exam.data[0].subject,this.classs=e.data.exam.data[0].class})},updateExam(){if(this.$refs.form.validate()){const e=JSON.parse(localStorage.getItem("user"));this.loading=!0,this.axios.patch(this.$apiUrl+"/api/v1.0/ExamManagement/exams/"+this.examDetails.examID,{exam:this.examName,totalMark:this.totalMark,date:this.date,classID:this.classs.classID,subjectID:this.subject.subjectID,categoryID:this.category.categoryID,branchID:e.employee.branch.branchID}).then(e=>{1==e.data.success?(this.hasSaved=!0,this.isEditing=!this.isEditing,this.reCreate(),this.loading=!1):this.hasSaved=!1}).catch(e=>{this.loading=!1,console.log(e.data),this.hasNotSaved=!0})}},cancelEdit(){this.isEditing=!this.isEditing},reCreate(){this.$emit("success",!0)}}},C=D,N=(t("fc6b"),t("2877")),S=Object(N["a"])(C,E,y,!1,null,"1671bf7b",null),A=S.exports,j=function(){var e=this,a=e._self._c;return a(_["a"],{attrs:{justify:"start"}},[a(f["a"],{attrs:{persistent:"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:s}){return[a(x["a"],e._g(e._b({staticClass:"error",attrs:{fab:"",dark:"","x-small":"",depressed:""}},"v-btn",s,!1),t),[a(n["a"],{attrs:{dark:""}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(l["a"],[a(r["a"],{staticClass:"text-center"},[a(i["d"],[a(_["a"],{attrs:{justify:"center"}},[a(n["a"],{attrs:{size:"100",color:"error"}},[e._v("mdi-help-circle-outline")])],1)],1),a("span",{staticClass:"text-h6 text-center"},[e._v("Do you really want to delete "),a("br"),e._v(" "),a("strong",[e._v('"'+e._s(e.examDetails.exam)+'"')])])],1),a(i["a"],[a(d["a"]),a(x["a"],{attrs:{color:"grey",outlined:""},on:{click:function(a){e.dialog=!1}}},[e._v("Cancel")]),a(x["a"],{attrs:{loading:e.loading,color:"error",depressed:""},on:{click:function(a){return e.deleteExam()}}},[e._v("Delete "),a(n["a"],{attrs:{right:""}},[e._v("mdi-delete")])],1)],1)],1)],1)],1)},I=[],w={props:["examDetails"],data:()=>({dialog:!1,loading:!1}),methods:{deleteExam(){this.loading=!0,this.axios.delete(this.$apiUrl+"/api/v1.0/ExamManagement/exams/"+this.examDetails.examID).then(e=>{1==e.data.success?(this.successAlert(),this.loading=!1,this.dialog=!1):this.failedAlert()}).catch(e=>{this.loading=!1,this.failedAlert(),console.log(e.data)})},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)}}},M=w,$=Object(N["a"])(M,j,I,!1,null,null,null),R=$.exports,O={components:{"app-ViewExamDetails":A,"app-DeleteExam":R},data(){return{menu:!1,search:"",headers:[{text:"EXAM",align:"start",sortable:!1,value:"exam"},{text:"CLASS",sortable:!1,value:"class.className"},{text:"GRADE",sortable:!0,value:"class.grade",width:"8%"},{text:"BRANCH",sortable:!1,value:"branchID.branchName"},{text:"",sortable:!1,value:"actions",align:"end"}],exams:[],examsForClass:[],classes:[],breadcrumbs:[{text:"Exams",disabled:!1,href:"/Exams"},{text:"ExamDetails",disabled:!0,href:"/Exams/ExamDetails"}],successAlert:!1,unsuccessAlert:!1}},created(){this.getAllExams()},methods:{getAllExams(){const e=JSON.parse(localStorage.getItem("user"));this.axios.get(this.$apiUrl+"/api/v1.0/TeacherManagement/teachers/"+e.employee.employeeID+"/classes").then(e=>(this.classes=e.data.teacher.classes,this.classes.forEach(e=>{e.exams.length>0&&e.exams.forEach(e=>{this.exams.push(e)})})))},deleteAlert(e){this.exams=[],this.getAllExams(),this.successAlert=e},faileAlert(e){this.unsuccessAlert=e},reCreate(e){this.exams=[],this.getAllExams(),console.log(e)}}},q=O,P=Object(N["a"])(q,m,h,!1,null,null,null);a["default"]=P.exports},fc6b:function(e,a,t){"use strict";t("0eed")}}]);
//# sourceMappingURL=chunk-0f509bae.61e7907b.js.map
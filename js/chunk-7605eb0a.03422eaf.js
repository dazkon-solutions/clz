(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7605eb0a"],{"17ac":function(e,t,a){"use strict";var s=a("c6a6"),i=a("8336"),r=a("b0af"),l=a("99d9"),c=a("62ad"),o=a("169a"),n=a("ce7e"),u=a("4bd4"),d=a("132d"),h=a("0fd9"),g=a("b974"),m=a("2db4"),b=a("2fa4"),p=a("8654"),y=function(){var e=this,t=e._self._c;return t(h["a"],{attrs:{justify:"end"}},[t(o["a"],{attrs:{scrollable:"","max-width":"700px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(i["a"],e._g(e._b({staticClass:"blue-grey",attrs:{dark:"",depressed:""},on:{click:function(t){return e.getAllCategories()}}},"v-btn",s,!1),a),[e._v("Add New Subject"),t(d["a"],{attrs:{dark:"",right:""}},[e._v("mdi-plus")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(r["a"],{attrs:{"max-width":"700",flat:""}},[t(l["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[e._v("Create Subject")]),t(n["a"]),t(l["c"],{staticStyle:{height:"800px"}},[t(u["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("fieldset",{staticClass:"px-5 pb-3",attrs:{hidden:e.hideTable}},[t("legend",[t(l["c"],{staticClass:"grey--text"},[e._v("Subject Details")])],1),t(h["a"],{attrs:{justify:"center",dense:""}},[t(c["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(p["a"],{attrs:{rules:e.subjectRules,label:"Subject","prepend-icon":"mdi-format-align-center"},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})],1),t(c["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(g["a"],{attrs:{items:e.medium,rules:e.mediumRules,label:"Medium","prepend-icon":"mdi-web",required:""},model:{value:e.getMedium,callback:function(t){e.getMedium=t},expression:"getMedium"}})],1)],1)],1),t("fieldset",{staticClass:"px-5 pb-3"},[t("legend",[t(l["c"],{staticClass:"grey--text"},[e._v("Category Details")])],1),t("div",{attrs:{hidden:e.hideTable}},[t(l["c"],{staticClass:"grey--text"},[e._v("Select "),t("strong",[e._v("category")]),e._v(" from below menu")]),t(c["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[t(l["c"],[t(s["a"],{attrs:{"prepend-icon":"mdi-candy-outline",items:e.categories,filter:e.categoryFilter,"item-text":"categoryName","item-value":"categoryID",label:"Category",rules:e.categoryRules},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1)],1),t(r["a"],{attrs:{color:"grey lighten-3",flat:""}},[t(l["c"],[e._v(" If you won't find the "),t("strong",[e._v("Category")]),e._v(", please create new "),t("strong",[e._v("Category")]),e._v(", ")]),t(c["a"],{staticClass:"text-center my-3"},[t(i["a"],{attrs:{color:"primary",depressed:"",outlined:""},on:{click:function(t){e.hideTable=!e.hideTable,e.hideActions=!e.hideActions}}},[e._v("create a new category")])],1)],1)],1),t("div",{attrs:{hidden:!e.hideTable}},[t(l["c"],{staticClass:"grey--text"},[e._v(" * Create new Category ")]),t(h["a"],[t(c["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(p["a"],{attrs:{label:"New Category","prepend-icon":"mdi-candy-outline","error-messages":e.errormsg},model:{value:e.newCategory,callback:function(t){e.newCategory=t},expression:"newCategory"}})],1),t(c["a"],{attrs:{cols:"12",md:"6",sm:"6","align-self":"center"}},[t(i["a"],{attrs:{depressed:"",color:"primary",outlined:""},on:{click:function(t){return e.createCategory()}}},[e._v("Create Category")]),t(i["a"],{staticClass:"ml-2",attrs:{outlined:"",color:"grey"},on:{click:function(t){e.hideTable=!e.hideTable,e.hideActions=!e.hideActions}}},[e._v("Cancel")])],1)],1)],1)])])],1),t(n["a"]),t("div",{attrs:{hidden:e.hideActions}},[t(l["a"],[t(b["a"]),t(i["a"],{attrs:{outlined:"",color:"grey"},on:{click:function(t){e.dialog=!1,e.Reset()}}},[e._v("Cancel")]),t(i["a"],{attrs:{loading:e.loading,disabled:!e.valid||!e.subject||!e.getMedium||!e.category,color:"primary",depressed:""},on:{click:function(t){return e.createSubject()}}},[e._v("Create")])],1)],1),t(m["a"],{attrs:{"multi-line":e.multiLine},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t(i["a"],e._b({attrs:{color:"red",text:""},on:{click:function(t){e.categoryCreated=!1}}},"v-btn",a,!1),[e._v("Close")])]}}]),model:{value:e.categoryCreated,callback:function(t){e.categoryCreated=t},expression:"categoryCreated"}},[e._v(" Category Create successfully. Now you can add it from the table. ")])],1)],1)],1)},f=[],v={data(){return{sortBy:"categoryID",sortDesc:!0,loading:!1,dialogm1:"",dialog:!1,valid:!0,subject:"",getMedium:"Sinhala",category:"",categoryName:"",newCategory:"",errormsg:null,categoryCreated:!1,hideTable:!1,hideActions:!1,multiLine:!0,search:"",headers:[{text:"Category",align:"start",sortable:!1,value:"categoryName"},{text:"",sortable:!1,value:"actions",align:"right"}],categories:[],subjectRules:[e=>!!e||"Subject is required",e=>/^[a-zA-Z_ ]*$/.test(e)||"Must be text only",e=>e&&e.length>2||"Name must be greater than 2"],mediumRules:[e=>!!e||"Medium is required"],categoryRules:[e=>!!e||"Category is required"],medium:["Sinhala","English","Tamil"]}},watch:{menu(e){e&&setTimeout(()=>this.activePicker="YEAR")}},methods:{categoryFilter(e,t){const a=e.categoryName.toLowerCase(),s=e.categoryID.toLowerCase(),i=t.toLowerCase();return a.indexOf(i)>-1||s.indexOf(i)>-1},createSubject(){this.$refs.form.validate()&&(this.loading=!0,this.axios.post(this.$apiUrl+"/api/v1.0/SubjectManagement/subjects",{subjectName:this.subject+" ("+this.getMedium+")",medium:this.getMedium,categoryID:this.category}).then(e=>{1==e.data.success?(this.dialog=!1,this.successAlert(),this.Reset(),this.loading=!1):this.failedAlert()}).catch(e=>{this.failedAlert(),console.log(e.data),this.loading=!1}))},getAllCategories(){this.axios.get(this.$apiUrl+"/api/v1.0/CategoryManagement/categories").then(e=>this.categories=e.data.category.data)},createCategory(){var e=/^[a-zA-Z\s.]+$/;e.test(this.newCategory)?this.newCategory.length<4?this.errormsg="Name must be greater than 3":(this.errormsg=null,this.axios.post(this.$apiUrl+"/api/v1.0/CategoryManagement/categories",{categoryName:this.newCategory}).then(e=>{1==e.data.success?(this.newCategory=null,this.categoryCreated=!0,this.hideTable=!1,this.hideActions=!1,this.getAllCategories()):console.log("error in category creation")})):this.errormsg="Must be text only"},Reset(){this.$refs.form.reset(),window.scrollTo(0,0)},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)}}},C=v,x=(a("88a8"),a("2877")),j=Object(x["a"])(C,y,f,!1,null,"73828b99",null);t["a"]=j.exports},1917:function(e,t,a){},"2bfd":function(e,t,a){},5337:function(e,t,a){},"549c":function(e,t,a){},"5d97":function(e,t,a){"use strict";a.r(t);var s=a("2bc5"),i=a("b0af"),r=a("99d9"),l=a("62ad"),c=a("a523"),o=a("8fea"),n=a("132d"),u=a("0fd9"),d=a("2db4"),h=a("2fa4"),g=a("8654"),m=function(){var e=this,t=e._self._c;return t("div",[t(s["a"],{attrs:{items:e.breadcrumbs},scopedSlots:e._u([{key:"divider",fn:function(){return[t(n["a"],[e._v("mdi-chevron-right")])]},proxy:!0}])}),t(c["a"],[t(d["a"],{attrs:{timeout:3e3,color:"red",bottom:""},model:{value:e.unsuccessAlert,callback:function(t){e.unsuccessAlert=t},expression:"unsuccessAlert"}},[t(n["a"],{attrs:{left:""}},[e._v("mdi-alert-outline")]),e._v("Item delete "),t("strong",[e._v("failed")])],1),t(d["a"],{attrs:{timeout:3e3,color:"green",bottom:""},model:{value:e.successAlert,callback:function(t){e.successAlert=t},expression:"successAlert"}},[t(n["a"],{attrs:{left:""}},[e._v("mdi-check")]),e._v("Item delete "),t("strong",[e._v("successful")])],1),t(d["a"],{attrs:{timeout:3e3,color:"red",bottom:""},model:{value:e.unsuccessAlertSubjectCreate,callback:function(t){e.unsuccessAlertSubjectCreate=t},expression:"unsuccessAlertSubjectCreate"}},[t(n["a"],{attrs:{left:""}},[e._v("mdi-alert-outline")]),e._v("Subject Create "),t("strong",[e._v("failed")])],1),t(d["a"],{attrs:{timeout:3e3,color:"green",bottom:""},model:{value:e.successAlertSubjectCreate,callback:function(t){e.successAlertSubjectCreate=t},expression:"successAlertSubjectCreate"}},[t(n["a"],{attrs:{left:""}},[e._v("mdi-check")]),e._v("Subject Create "),t("strong",[e._v("successful")])],1),t(d["a"],{attrs:{timeout:3e3,color:"red",bottom:""},model:{value:e.unsuccessAlertUpdate,callback:function(t){e.unsuccessAlertUpdate=t},expression:"unsuccessAlertUpdate"}},[t(n["a"],{attrs:{left:""}},[e._v("mdi-alert-outline")]),e._v("Item update "),t("strong",[e._v("failed")])],1),t(d["a"],{attrs:{timeout:3e3,color:"green",bottom:""},model:{value:e.successAlertUpdate,callback:function(t){e.successAlertUpdate=t},expression:"successAlertUpdate"}},[t(n["a"],{attrs:{left:""}},[e._v("mdi-check")]),e._v("Item update "),t("strong",[e._v("successful")])],1),[t(u["a"],[t(l["a"],[t(i["a"],{attrs:{flat:""}},[t(r["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[e._v("Subjects "),t(h["a"]),t("app-CreateSubject",{staticClass:"mr-2",on:{success:function(t){return e.subjectCreateSuccessAlert(t)},failed:function(t){return e.subjectCreateFaileAlert(t)}}})],1),t(r["d"],[t(h["a"]),t(g["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search Subject","single-line":"","hide-details":""},model:{value:e.subjectSearch,callback:function(t){e.subjectSearch=t},expression:"subjectSearch"}})],1),t(o["a"],{attrs:{"sort-by":e.sortBy,"sort-desc":e.sortDesc,headers:e.subjectHeaders,items:e.subjects,search:e.subjectSearch,"items-per-page":5},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(r["a"],[t("app-editSubject",{attrs:{subjectDetails:a},on:{success:function(t){return e.updateSuccessAlert(t)},failed:function(t){return e.updateFaileAlert(t)}}}),t(h["a"]),t("app-deleteSubject",{staticClass:"ml-5",attrs:{subjectDetails:a},on:{success:function(t){return e.deleteAlert(t)},failed:function(t){return e.faileAlert(t)}}})],1)]}}],null,!0)})],1)],1)],1),t(u["a"],[t(l["a"],[t(i["a"],{attrs:{flat:""}},[t(r["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[e._v("Category")]),t(r["d"],[t(h["a"]),t(g["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search Category","single-line":"","hide-details":""},model:{value:e.categorySearch,callback:function(t){e.categorySearch=t},expression:"categorySearch"}})],1),t(o["a"],{attrs:{headers:e.categoryHeaders,items:e.categories,search:e.categorySearch,"items-per-page":5},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(r["a"],[t("app-editSubjectCategory",{attrs:{subjectCategory:a},on:{success:function(t){return e.updateSuccessAlert(t)},failed:function(t){return e.updateFaileAlert(t)}}}),t(h["a"]),t("app-deleteSubjectCategory",{staticClass:"ml-5",attrs:{subjectCategory:a},on:{success:function(t){return e.deleteAlert(t)},failed:function(t){return e.faileAlert(t)}}})],1)]}}],null,!0)})],1)],1)],1)]],2)],1)},b=[],p=a("17ac"),y=a("8336"),f=a("169a"),v=function(){var e=this,t=e._self._c;return t(u["a"],{attrs:{justify:"start"}},[t(f["a"],{attrs:{persistent:"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(y["a"],e._g(e._b({staticClass:"error",attrs:{fab:"",dark:"","x-small":"",depressed:""}},"v-btn",s,!1),a),[t(n["a"],{attrs:{dark:""}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[0==e.subjectDetails.classCount?t(i["a"],[t(c["a"],{staticClass:"text-center"},[t(r["d"],[t(u["a"],{attrs:{justify:"center"}},[t(n["a"],{attrs:{size:"100",color:"error"}},[e._v("mdi-help-circle-outline")])],1)],1),t("span",{staticClass:"text-h6 text-center"},[e._v("Do you really want to delete "),t("br"),e._v(" "),t("strong",[e._v('"'+e._s(e.subjectDetails.subjectName)+'"')])])],1),t(r["a"],[t(h["a"]),t(y["a"],{attrs:{color:"grey",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),t(y["a"],{attrs:{loading:e.loading,color:"error",depressed:""},on:{click:function(t){return e.deleteSubject()}}},[e._v("Delete "),t(n["a"],{attrs:{right:""}},[e._v("mdi-delete")])],1)],1)],1):t(i["a"],[t(c["a"],{staticClass:"text-center"},[t(r["d"],[t(u["a"],{attrs:{justify:"center"}},[t(n["a"],{attrs:{size:"100",color:"orange"}},[e._v("mdi-alert-circle-outline")])],1)],1),t("span",{staticClass:"text-h6 text-center"},[e._v("You cannot delete"),t("br"),e._v(" "),t("strong",[e._v('"'+e._s(e.subjectDetails.subjectName)+'"')]),t("br"),e._v("It has been assigned classes")])],1),t(r["a"],[t(h["a"]),t(y["a"],{staticClass:"ok_btn",attrs:{color:"grey",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v(" OK ")])],1)],1)],1)],1)},C=[],x={props:["subjectDetails"],data:()=>({dialog:!1,loading:!1}),methods:{deleteSubject(){this.loading=!0,this.axios.delete(this.$apiUrl+"/api/v1.0/SubjectManagement/subjects/"+this.subjectDetails.subjectID).then(e=>{1==e.data.success?(this.successAlert(),this.dialog=!1,this.loading=!1):this.failedAlert()}).catch(e=>{this.failedAlert(),console.log(e.data),this.loading=!1})},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)}}},j=x,S=(a("8a4c"),a("2877")),_=Object(S["a"])(j,v,C,!1,null,"65bbbd89",null),I=_.exports,A=function(){var e=this,t=e._self._c;return t(u["a"],{attrs:{justify:"start"}},[t(f["a"],{attrs:{persistent:"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(y["a"],e._g(e._b({staticClass:"error",attrs:{fab:"",dark:"","x-small":"",depressed:""}},"v-btn",s,!1),a),[t(n["a"],{attrs:{dark:""}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[0==e.subjectCategory.subjectCount?t(i["a"],[t(c["a"],{staticClass:"text-center"},[t(r["d"],[t(u["a"],{attrs:{justify:"center"}},[t(n["a"],{attrs:{size:"100",color:"error"}},[e._v("mdi-help-circle-outline")])],1)],1),t("span",{staticClass:"text-h6 text-center"},[e._v("Do you really want to delete "),t("br"),e._v(" "),t("strong",[e._v('"'+e._s(e.subjectCategory.categoryName)+'"')])])],1),t(r["a"],[t(h["a"]),t(y["a"],{attrs:{color:"grey",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),t(y["a"],{attrs:{loading:e.loading,color:"error",depressed:""},on:{click:function(t){return e.deleteSubjectCategory()}}},[e._v("Delete "),t(n["a"],{attrs:{right:""}},[e._v("mdi-delete")])],1)],1)],1):t(i["a"],[t(c["a"],{staticClass:"text-center"},[t(r["d"],[t(u["a"],{attrs:{justify:"center"}},[t(n["a"],{attrs:{size:"100",color:"orange"}},[e._v("mdi-alert-circle-outline")])],1)],1),t("span",{staticClass:"text-h6 text-center"},[e._v("You cannot delete"),t("br"),e._v(" "),t("strong",[e._v('"'+e._s(e.subjectCategory.categoryName)+'"')]),t("br"),e._v("It has been assigned subjects")])],1),t(r["a"],[t(h["a"]),t(y["a"],{staticClass:"ok_btn",attrs:{color:"grey",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v(" OK ")])],1)],1)],1)],1)},k=[],D={props:["subjectCategory"],data:()=>({dialog:!1,loading:!1}),methods:{deleteSubjectCategory(){this.loading=!0,this.axios.delete(this.$apiUrl+"/api/v1.0/CategoryManagement/categories/"+this.subjectCategory.categoryID).then(e=>{1==e.data.success?(this.successAlert(),this.dialog=!1,this.loading=!1):this.failedAlert()}).catch(e=>{this.failedAlert(),console.log(e.data),this.loading=!1})},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)}}},w=D,M=(a("6612"),Object(S["a"])(w,A,k,!1,null,"73266c07",null)),$=M.exports,N=a("c6a6"),T=a("ce7e"),U=a("4bd4"),F=a("b974"),R=function(){var e=this,t=e._self._c;return t(u["a"],{attrs:{justify:"end"}},[t(f["a"],{attrs:{scrollable:"","max-width":"700px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(y["a"],e._g(e._b({staticClass:"teal",attrs:{small:"",block:"",dark:"",depressed:""},on:{click:function(t){e.getAllCategories(),e.getSubject()}}},"v-btn",s,!1),a),[e._v("Edit"),t(n["a"],{attrs:{dark:"",right:""}},[e._v("mdi-pencil")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(i["a"],{attrs:{"max-width":"700",flat:""}},[t(r["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[e._v("Edit Subject")]),t(T["a"]),t(r["c"],{staticStyle:{height:"800px"}},[t(U["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("fieldset",{staticClass:"px-5 pb-3",attrs:{hidden:e.hideTable}},[t("legend",[t(r["c"],{staticClass:"grey--text"},[e._v("Subject Details")])],1),t(u["a"],{attrs:{justify:"center",dense:""}},[t(l["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(g["a"],{attrs:{disabled:"",rules:e.subjectRules,label:"Subject","prepend-icon":"mdi-format-align-center"},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})],1),t(l["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(F["a"],{attrs:{items:e.medium,rules:e.mediumRules,label:"Medium","prepend-icon":"mdi-web",required:""},model:{value:e.getMedium,callback:function(t){e.getMedium=t},expression:"getMedium"}})],1)],1)],1),t("fieldset",{staticClass:"px-5 pb-3"},[t("legend",[t(r["c"],{staticClass:"grey--text"},[e._v("Category Details")])],1),t("div",{attrs:{hidden:e.hideTable}},[t(r["c"],{staticClass:"grey--text"},[e._v("Select "),t("strong",[e._v("category")]),e._v(" from below menu")]),t(l["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[t(r["c"],[t(N["a"],{attrs:{"prepend-icon":"mdi-candy-outline",items:e.categories,filter:e.categoryFilter,"item-text":"categoryName","item-value":"categoryID",label:"Category",rules:e.categoryRules},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1)],1),t(i["a"],{attrs:{color:"grey lighten-3",flat:""}},[t(r["c"],[e._v(" If you won't find the "),t("strong",[e._v("Category")]),e._v(", please create new "),t("strong",[e._v("Category")]),e._v(", ")]),t(l["a"],{staticClass:"text-center my-3"},[t(y["a"],{attrs:{color:"primary",depressed:"",outlined:""},on:{click:function(t){e.hideTable=!e.hideTable,e.hideActions=!e.hideActions}}},[e._v("create a new category")])],1)],1)],1),t("div",{attrs:{hidden:!e.hideTable}},[t(r["c"],{staticClass:"grey--text"},[e._v(" * Create new Category ")]),t(u["a"],[t(l["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[t(g["a"],{attrs:{label:"New Category","prepend-icon":"mdi-candy-outline","error-messages":e.errormsg},model:{value:e.newCategory,callback:function(t){e.newCategory=t},expression:"newCategory"}})],1),t(l["a"],{attrs:{cols:"12",md:"6",sm:"6","align-self":"center"}},[t(y["a"],{attrs:{depressed:"",color:"primary",outlined:""},on:{click:function(t){return e.createCategory()}}},[e._v("Create Category")]),t(y["a"],{staticClass:"ml-2",attrs:{outlined:"",color:"grey"},on:{click:function(t){e.hideTable=!e.hideTable,e.hideActions=!e.hideActions}}},[e._v("Cancel")])],1)],1)],1)])])],1),t(T["a"]),t("div",{attrs:{hidden:e.hideActions}},[t(r["a"],[t(h["a"]),t(y["a"],{attrs:{outlined:"",color:"grey"},on:{click:function(t){e.dialog=!1,e.Reset()}}},[e._v("Cancel")]),t(y["a"],{attrs:{loading:e.loading,disabled:!e.valid||!e.subject||!e.getMedium||!e.category,color:"primary",depressed:""},on:{click:function(t){return e.updateSubject()}}},[e._v("Save "),t(n["a"],{attrs:{left:""}},[e._v("mdi-content-save")])],1)],1)],1),t(d["a"],{attrs:{"multi-line":e.multiLine},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t(y["a"],e._b({attrs:{color:"red",text:""},on:{click:function(t){e.categoryCreated=!1}}},"v-btn",a,!1),[e._v("Close")])]}}]),model:{value:e.categoryCreated,callback:function(t){e.categoryCreated=t},expression:"categoryCreated"}},[e._v(" Category Create successfully. Now you can add it from the table. ")])],1)],1)],1)},B=[],O={props:["subjectDetails"],data(){return{sortBy:"categoryID",sortDesc:!0,loading:!1,dialogm1:"",dialog:!1,valid:!0,subject:"",getMedium:"Sinhala",category:"",categoryName:"",newCategory:"",errormsg:null,categoryCreated:!1,hideTable:!1,hideActions:!1,multiLine:!0,search:"",headers:[{text:"Category",align:"start",sortable:!1,value:"categoryName"},{text:"",sortable:!1,value:"actions",align:"right"}],categories:[],subjectRules:[e=>!!e||"Subject is required",e=>/^[a-zA-Z_ ]*$/.test(e)||"Must be text only",e=>e&&e.length>2||"Name must be greater than 2"],mediumRules:[e=>!!e||"Medium is required"],categoryRules:[e=>!!e||"Category is required"],medium:["Sinhala","English","Tamil"]}},watch:{menu(e){e&&setTimeout(()=>this.activePicker="YEAR")}},methods:{getSubject(){this.axios.get(this.$apiUrl+"/api/v1.0/SubjectManagement/subjects/"+this.subjectDetails.subjectID).then(e=>{this.category=e.data.subject.data[0].category.categoryID,this.categoryName=e.data.subject.data[0].category.categoryName,this.getMedium=e.data.subject.data[0].medium,this.splitSubjectName(e.data.subject.data[0].subjectName)})},splitSubjectName(e){const t=e,a=t.split(" (").shift();this.subject=a},categoryFilter(e,t){const a=e.categoryName.toLowerCase(),s=e.categoryID.toLowerCase(),i=t.toLowerCase();return a.indexOf(i)>-1||s.indexOf(i)>-1},updateSubject(){this.$refs.form.validate()&&(this.loading=!0,this.axios.patch(this.$apiUrl+"/api/v1.0/SubjectManagement/subjects/"+this.subjectDetails.subjectID,{subjectName:this.subject+" ("+this.getMedium+")",medium:this.getMedium,categoryID:this.category}).then(e=>{1==e.data.success?(this.dialog=!1,this.successAlert(),this.loading=!1):this.failedAlert()}).catch(e=>{this.failedAlert(),console.log(e.data),this.loading=!1}))},getAllCategories(){this.axios.get(this.$apiUrl+"/api/v1.0/CategoryManagement/categories").then(e=>this.categories=e.data.category.data)},createCategory(){var e=/^[a-zA-Z\s.]+$/;e.test(this.newCategory)?this.newCategory.length<4?this.errormsg="Name must be greater than 3":(this.errormsg=null,this.axios.post(this.$apiUrl+"/api/v1.0/CategoryManagement/categories",{categoryName:this.newCategory}).then(e=>{1==e.data.success?(this.newCategory=null,this.categoryCreated=!0,this.hideTable=!1,this.hideActions=!1,this.getAllCategories()):console.log("error in category creation")})):this.errormsg="Must be text only"},Reset(){this.$refs.form.reset(),window.scrollTo(0,0)},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)}}},z=O,E=(a("6dd3"),Object(S["a"])(z,R,B,!1,null,"2e431ec2",null)),L=E.exports,V=function(){var e=this,t=e._self._c;return t(u["a"],{attrs:{justify:"end"}},[t(f["a"],{attrs:{scrollable:"","max-width":"700px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(y["a"],e._g(e._b({staticClass:"teal",attrs:{small:"",block:"",dark:"",depressed:""},on:{click:function(t){return e.getSubjectCategory()}}},"v-btn",s,!1),a),[e._v("Edit"),t(n["a"],{attrs:{dark:"",right:""}},[e._v("mdi-pencil")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(i["a"],{attrs:{"max-width":"700",flat:""}},[t(r["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[e._v("Edit Subject Category")]),t(T["a"]),t(r["c"],{staticStyle:{height:"200px"}},[t(U["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("fieldset",{staticClass:"px-5 pb-3"},[t("legend",[t(r["c"],{staticClass:"grey--text"},[e._v("Category Details")])],1),t(u["a"],{attrs:{justify:"center",dense:""}},[t(l["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[t(g["a"],{attrs:{rules:e.categoryRules,label:"Category","prepend-icon":"mdi-candy-outline"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1)],1)],1)])],1),t(T["a"]),t(r["a"],[t(h["a"]),t(y["a"],{attrs:{outlined:"",color:"grey"},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),t(y["a"],{attrs:{loading:e.loading,disabled:!e.valid||!e.category,color:"primary",depressed:""},on:{click:function(t){return e.updateSubjectCategory()}}},[e._v("Save "),t(n["a"],{attrs:{left:""}},[e._v("mdi-content-save")])],1)],1)],1)],1)],1)},q=[],P={props:["subjectCategory"],data(){return{dialogm1:"",dialog:!1,loading:!1,valid:!0,category:"",categoryRules:[e=>!!e||"Category is required",e=>/^[a-zA-Z\s.]+$/.test(e)||"Must be text only",e=>e&&e.length>2||"Name must be greater than 2"]}},methods:{getSubjectCategory(){this.axios.get(this.$apiUrl+"/api/v1.0/CategoryManagement/categories/"+this.subjectCategory.categoryID).then(e=>{this.category=e.data.category.data[0].categoryName})},updateSubjectCategory(){this.$refs.form.validate()&&(this.loading=!0,this.axios.patch(this.$apiUrl+"/api/v1.0/CategoryManagement/categories/"+this.subjectCategory.categoryID,{categoryName:this.category}).then(e=>{1==e.data.success?(this.dialog=!1,this.successAlert(),this.loading=!1):this.failedAlert()}).catch(e=>{this.failedAlert(),console.log(e.data),this.loading=!1}))},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)}}},Y=P,K=(a("ba84"),Object(S["a"])(Y,V,q,!1,null,"23ec01d3",null)),Z=K.exports,H={components:{"app-CreateSubject":p["a"],"app-deleteSubject":I,"app-deleteSubjectCategory":$,"app-editSubject":L,"app-editSubjectCategory":Z},data(){return{sortBy:"subjectID",sortDesc:!0,subjectSearch:"",categorySearch:"",subjectHeaders:[{text:"SUBJECT",align:"start",sortable:!0,value:"subjectName"},{text:"MEDIUM",sortable:!0,value:"medium",filterable:!1},{text:"CATEGORY",sortable:!0,value:"category.categoryName"},{text:"",sortable:!1,value:"actions"}],subjects:[],categoryHeaders:[{text:"NAME",align:"start",sortable:!0,value:"categoryName"},{text:"",sortable:!1,align:"end",value:"actions"}],categories:[],breadcrumbs:[{text:"Classes",disabled:!1,href:"/Classes"},{text:"Subjects",disabled:!0,href:"/Classes/Subjects"}],successAlert:!1,unsuccessAlert:!1,unsuccessAlertSubjectCreate:!1,successAlertSubjectCreate:!1,unsuccessAlertUpdate:!1,successAlertUpdate:!1}},created(){this.getSubjectsByCategory(),this.getClassesBySubject()},methods:{getAllCategories(){this.axios.get(this.$apiUrl+"/api/v1.0/CategoryManagement/categories").then(e=>this.categories=e.data.category.data)},getAllSubjects(){this.axios.get(this.$apiUrl+"/api/v1.0/SubjectManagement/subjects").then(e=>this.subjects=e.data.subject.data)},getClassesBySubject(){this.axios.get(this.$apiUrl+"/api/v1.0/SubjectManagement/subjects").then(e=>(this.subjects=e.data.subject.data,this.subjects.forEach(e=>{this.axios.get(this.$apiUrl+"/api/v1.0/SubjectManagement/subjects/"+e.subjectID+"/classes").then(t=>e.classCount=t.data.subject.data[0].classes.length)})))},getSubjectsByCategory(){this.axios.get(this.$apiUrl+"/api/v1.0/CategoryManagement/categories").then(e=>(this.categories=e.data.category.data,this.categories.forEach(e=>{this.axios.get(this.$apiUrl+"/api/v1.0/CategoryManagement/categories/"+e.categoryID+"/subjects").then(t=>e.subjectCount=t.data.category.data[0].subjects.length)})))},deleteAlert(e){this.getSubjectsByCategory(),this.getClassesBySubject(),this.successAlert=e},faileAlert(e){this.unsuccessAlert=e},subjectCreateSuccessAlert(e){this.getSubjectsByCategory(),this.getClassesBySubject(),this.successAlertSubjectCreate=e},subjectCreateFaileAlert(e){this.unsuccessAlertSubjectCreate=e},updateSuccessAlert(e){this.getSubjectsByCategory(),this.getClassesBySubject(),this.successAlertUpdate=e},updateFaileAlert(e){this.unsuccessAlertUpdate=e}}},J=H,G=Object(S["a"])(J,m,b,!1,null,null,null);t["default"]=G.exports},6612:function(e,t,a){"use strict";a("ae17")},"6dd3":function(e,t,a){"use strict";a("af5d")},"88a8":function(e,t,a){"use strict";a("1917")},"8a4c":function(e,t,a){"use strict";a("5337")},ae17:function(e,t,a){},af5d:function(e,t,a){},ba84:function(e,t,a){"use strict";a("549c")},c6a6:function(e,t,a){"use strict";a("2bfd");var s=a("b974"),i=a("8654"),r=a("d9f7"),l=a("80d2");const c={...s["b"],offsetY:!0,offsetOverflow:!0,transition:!1};t["a"]=s["a"].extend({name:"v-autocomplete",props:{autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(e,t,a)=>a.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:s["a"].options.props.menuProps.type,default:()=>c},noFilter:Boolean,searchInput:{type:String}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...s["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(e=>this.getValue(e))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(e=>!this.hasItem(e)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(e=>{const t=Object(l["r"])(e,this.itemText),a=null!=t?String(t):"";return this.filter(e,String(this.internalSearch),a)})},internalSearch:{get(){return this.lazySearch},set(e){this.lazySearch!==e&&(this.lazySearch=e,this.$emit("update:search-input",e))}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const e=s["a"].options.computed.$_menuProps.call(this);return e.contentClass=("v-autocomplete__content "+(e.contentClass||"")).trim(),{...c,...e}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(e=>this.valueComparator(this.getValue(e),this.getValue(this.internalValue)))},listData(){const e=s["a"].options.computed.listData.call(this);return e.props={...e.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.blur(),this.updateSelf())},isMenuActive(e){!e&&this.hasSlot&&(this.lazySearch=null)},items(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(e,t){if(e!==t){if(!this.autoSelectFirst){const a=t[this.$refs.menu.listIndex];a?this.setMenuIndex(e.findIndex(e=>e===a)):this.setMenuIndex(-1),this.$emit("update:list-index",this.$refs.menu.listIndex)}this.$nextTick(()=>{this.internalSearch&&(1===e.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.autoSelectFirst&&e.length&&(this.setMenuIndex(0),this.$emit("update:list-index",this.$refs.menu.listIndex)))})}},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(e){this.searchIsDirty||(this.multiple&&e===l["x"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===l["x"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==l["x"].backspace&&e!==l["x"].delete||this.deleteCurrentItem())},deleteCurrentItem(){const e=this.selectedIndex,t=this.selectedItems[e];if(!this.isInteractive||this.getDisabled(t))return;const a=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==a)return void(this.selectedIndex=a);const s=this.selectedItems.length,i=e!==s-1?e:e-1,r=this.selectedItems[i];r?this.selectItem(t):this.setValue(this.multiple?[]:null),this.selectedIndex=i},clearableCallback(){this.internalSearch=null,s["a"].options.methods.clearableCallback.call(this)},genInput(){const e=i["a"].options.methods.genInput.call(this);return e.data=Object(r["a"])(e.data,{attrs:{"aria-activedescendant":Object(l["p"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(l["p"])(e.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),e},genInputSlot(){const e=s["a"].options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections(){return this.hasSlot||this.multiple?s["a"].options.methods.genSelections.call(this):[]},onClick(e){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput(e){if(this.selectedIndex>-1||!e.target)return;const t=e.target,a=t.value;t.value&&this.activateMenu(),this.multiple||""!==a||this.deleteCurrentItem(),this.internalSearch=a,this.badInput=t.validity&&t.validity.badInput},onKeyDown(e){const t=e.keyCode;!e.ctrlKey&&[l["x"].home,l["x"].end].includes(t)||s["a"].options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown(e){},onTabDown(e){s["a"].options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown(e){e.preventDefault(),this.activateMenu()},selectItem(e){s["a"].options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems(){s["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.multiple||this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy(e){var t,a;if(-1===this.selectedIndex)return;const s=this.selectedItems[this.selectedIndex],i=this.getText(s);null===(t=e.clipboardData)||void 0===t||t.setData("text/plain",i),null===(a=e.clipboardData)||void 0===a||a.setData("text/vnd.vuetify.autocomplete.item+plain",i),e.preventDefault()}}})}}]);
//# sourceMappingURL=chunk-7605eb0a.03422eaf.js.map
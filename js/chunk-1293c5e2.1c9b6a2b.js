(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1293c5e2"],{"33d3":function(t,e,s){},"4ca6":function(t,e,s){"use strict";s("14d9"),s("ff44");var a=s("132d"),i=s("a9ad"),n=s("7560"),l=s("f2e7"),o=s("2b0e"),r=o["a"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),d=s("fe6c"),c=s("58df"),u=s("80d2");e["a"]=Object(c["a"])(i["a"],Object(d["b"])(["left","bottom"]),n["a"],l["a"],r).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes(){return{"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile,...this.themeClasses}},computedBottom(){return this.bottom?"auto":this.computedYOffset},computedLeft(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop(){return this.bottom?this.computedYOffset:"auto"},computedXOffset(){return this.calcPosition(this.offsetX)},computedYOffset(){return this.calcPosition(this.offsetY)},isRtl(){return this.$vuetify.rtl},offset(){return this.overlap?this.dot?8:12:this.dot?2:4},styles(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition(t){return`calc(100% - ${Object(u["h"])(t||this.offset)})`},genBadge(){const t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),s=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),a=this.$createElement("span",s,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[a]):a},genBadgeContent(){if(this.dot)return;const t=Object(u["s"])(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(a["a"],this.icon):void 0)},genBadgeWrapper(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render(t){const e=[this.genBadgeWrapper()],s=[Object(u["s"])(this)],{"aria-atomic":a,"aria-label":i,"aria-live":n,role:l,title:o,...r}=this.$attrs;return this.inline&&this.left?s.unshift(e):s.push(e),t("span",{staticClass:"v-badge",attrs:r,class:this.classes},s)}})},5311:function(t,e,s){"use strict";s("14d9");var a=s("5607"),i=s("2b0e");e["a"]=i["a"].extend({name:"rippleable",directives:{ripple:a["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}})},"578d":function(t,e,s){"use strict";s("b2f3")},"5f00":function(t,e,s){"use strict";var a=s("8336"),i=s("b0af"),n=s("99d9"),l=s("62ad"),o=s("169a"),r=s("ce7e"),d=s("4bd4"),c=s("132d"),u=s("0fd9"),h=s("2db4"),p=s("2fa4"),m=s("8654"),f=function(){var t=this,e=t._self._c;return e(u["a"],{attrs:{justify:"end"}},[e(o["a"],{attrs:{scrollable:"","max-width":"500px",persistent:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(a["a"],t._g(t._b({staticClass:"blue-grey",attrs:{dark:"",depressed:""}},"v-btn",i,!1),s),[t._v("Add student"),e(c["a"],{attrs:{dark:"",right:""}},[t._v("mdi-plus")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(i["a"],{attrs:{"max-width":"500",flat:""}},[e(n["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[t._v("Add student")]),e(r["a"]),e(n["c"],{staticClass:"mt-2"},[t._v(" Add individual student to the attendance list ")]),e(n["c"],[e(d["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(u["a"],{attrs:{justify:"center",dense:"",align:"center"}},[e(l["a"],{attrs:{cols:"12",md:"12",sm:"12"}},[e(m["a"],{attrs:{label:"Student ID",placeholder:"ICTAxxxxxxx",rules:t.studentIdRule,maxlength:"11",clearable:""},model:{value:t.studentID,callback:function(e){t.studentID=e},expression:"studentID"}})],1)],1)],1)],1),e(r["a"]),e(n["a"],[e(p["a"]),e(a["a"],{attrs:{outlined:"",color:"grey"},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),e(a["a"],{attrs:{loading:t.loading,color:"primary",disabled:!t.valid||""==t.studentID,depressed:""},on:{click:function(e){return t.addToList()}}},[t._v("Add to Attendance")])],1)],1),e(h["a"],{attrs:{timeout:3e3,absolute:"",bottom:"",color:"red"},model:{value:t.addStudentUnsuccessful,callback:function(e){t.addStudentUnsuccessful=e},expression:"addStudentUnsuccessful"}},[e(c["a"],{attrs:{left:""}},[t._v("mdi-alert-outline")]),t._v("Add student "),e("strong",[t._v("failed")]),t._v(". Please check STUDENT ID")],1)],1)],1)},g=[],v={props:["classID"],data(){return{dialog:!1,studentID:"",loading:!1,valid:!0,studentIdRule:[t=>!!t||"Student ID is required",t=>/ICTA+\d\d\d\d\d\d\d/.test(t)||"Invalid student ID",t=>t&&11==t.length||"Invalid student ID"],addStudentUnsuccessful:!1}},methods:{addToList(){this.$refs.form.validate()&&(this.loading=!0,this.axios.post(this.$apiUrl+"/api/v1.0/AttendanceManagement/attendances/students",{studentID:this.studentID,classID:this.classID}).then(t=>{1==t.data.success?(this.dialog=!1,this.successAlert(),this.loading=!1,this.Reset()):this.addStudentUnsuccessful=!0}).catch(t=>{this.loading=!1,this.addStudentUnsuccessful=!0,console.log(t.data)}))},Reset(){this.$refs.form.reset()},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)}}},b=v,y=(s("578d"),s("2877")),S=Object(y["a"])(b,f,g,!1,null,"38bc6093",null);e["a"]=S.exports},6349:function(t,e,s){"use strict";var a=s("8336"),i=s("b0af"),n=s("99d9"),l=s("62ad"),o=s("8fea"),r=s("169a"),d=s("ce7e"),c=s("4bd4"),u=s("132d"),h=s("0fd9"),p=s("2fa4"),m=s("8654"),f=function(){var t=this,e=t._self._c;return e(h["a"],{attrs:{justify:"end"}},[e(r["a"],{attrs:{scrollable:"","max-width":"450",persistent:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(a["a"],t._g(t._b({staticClass:"teal",attrs:{disabled:t.show<=0,width:"200",block:"",depressed:"",color:"white--text"},on:{click:function(e){return t.getFees()}}},"v-btn",i,!1),s),[t._v("Pay"),e(u["a"],{attrs:{dark:"",right:""}},[t._v("mdi-cash-multiple")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(i["a"],{attrs:{"max-width":"450",flat:""}},[e(n["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[t._v("Payment")]),e(d["a"]),e(n["c"],[e(c["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("div",[e(n["c"],[t._v("This is "),e("strong",[t._v(t._s(t.student.studentName))]),t._v("'s payment details. You can mark payment for "),e("strong",[t._v("Arrears/Today fee")]),t._v(". And also you can "),e("strong",[t._v("change values")]),t._v(" before payment.")]),[e("div",[e("div",{staticClass:"pa-5"},[e("legend",[t._v(" Payment Details ")]),e(o["a"],{attrs:{headers:t.headers,items:t.payments,"show-select":"","item-key":"no",dense:"","hide-default-footer":""},on:{input:function(e){t.getSelect(e),t.getSelectStatus(e)}},scopedSlots:t._u([{key:"item.classFee",fn:function({item:s}){return[e(m["a"],{staticClass:"centered-input",staticStyle:{width:"70px"},attrs:{rules:t.amountRules,suffix:".00",dense:""},model:{value:s.fee,callback:function(e){t.$set(s,"fee",e)},expression:"item.fee"}})]}}],null,!0),model:{value:t.table,callback:function(e){t.table=e},expression:"table"}})],1),e(d["a"]),e(h["a"],{staticClass:"mt-3"},[e(l["a"],{staticClass:"text-right"},[e(n["c"],{staticClass:"text-h6"},[t._v("Amount (Rs.)")])],1),e(l["a"],[e(m["a"],{staticClass:"centered-input text-h5",staticStyle:{width:"150px"},attrs:{readonly:"",outlined:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)],1)],1)]],2)])],1),e(d["a"]),e(n["a"],[e(p["a"]),e(a["a"],{attrs:{color:"grey",outlined:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),e(a["a"],{attrs:{loading:t.loading,color:"primary",depressed:"",width:"150",disabled:!t.valid||""==t.selectedPayments||!t.selectedPayments},on:{click:function(e){return t.payNow()}}},[t._v("Pay now")])],1)],1)],1)],1)},g=[],v=(s("14d9"),s("13d5"),s("67b0")),b={props:["show","classDetails","student"],data(){return{logedUser:JSON.parse(localStorage.getItem("user")),loading:!1,dialog:!1,valid:!0,classFee:"",amount:"0.00",paySuccessAlert:!1,studentEmail:"",table:[],headers:[{text:"DESCRIPTION",align:"start",sortable:!1,value:"description"},{text:"FEE (Rs.)",sortable:!1,value:"classFee",width:"40%"}],payments:[],selectedPayments:[],selectedPaymentStatus:[],amounts:[],amountRules:[t=>!!t||"Amount is required",t=>/^\d{0,8}(\.\d{1,4})?$/.test(t)||"Numbers only"]}},methods:{getSelect(t){this.selectedPayments=t.map((function(t){return parseInt(t.fee)})),this.amount=this.selectedPayments.reduce((t,e)=>t+e,0)+".00"},getSelectStatus(t){this.selectedPaymentStatus=t.map((function(t){return parseInt(t.no)}))},getFees(){while(this.payments.length>0)this.payments.pop();while(this.selectedPayments.length>0)this.selectedPayments.pop();while(this.selectedPaymentStatus.length>0)this.selectedPaymentStatus.pop();while(this.table.length>0)this.table.pop();const t=this.classDetails.classFee.split(".");this.classFee=t[0];var e,s=this.student.paymentStatus,a=1;if(s>1){var i=s-1;for(a;a<=i;a++)e={no:a,description:"Arrears",fee:this.classFee},this.payments.push(e)}s>0&&(e={no:a,description:"Today fee",fee:this.classFee},this.payments.push(e))},payNow(){console.log(this.selectedPaymentStatus.length),this.loading=!0,this.axios.patch(this.$apiUrl+"/api/v1.0/EnrollmentManagement/students/"+this.student.studentID+"/classes/"+this.classDetails.classID+"/daily",{decrement:this.selectedPaymentStatus.length}).then(t=>{1==t.data.success?this.feeManage():this.failedAlert()}).catch(t=>{this.failedAlert(),console.log(t.data),this.loading=!1})},successAlert(){this.$emit("success",!0)},failedAlert(){this.$emit("failed",!0)},feeManage(){this.selectedPayments.forEach(t=>{var e={paidAmount:t+".00"};this.amounts.push(e)}),this.axios.post(this.$apiUrl+"/api/v1.0/FeeManagement/students/"+this.student.studentID+"/classes/"+this.classDetails.classID+"/fees",{amounts:this.amounts,date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),handlerStaffID:this.logedUser.employee.employeeID,branchID:this.logedUser.employee.branch.branchID,paymentStatus:this.selectedPaymentStatus.length}).then(t=>{1==t.data.success?(this.getStudent(this.student.studentID),this.loading=!1,this.successAlert(),this.dialog=!1):this.failedAlert()}).catch(t=>{this.failedAlert(),console.log(t.data),this.loading=!1})},getStudent(t){this.axios.get(this.$apiUrl+"/api/v1.0/StudentManagement/students/"+t).then(t=>{this.studentEmail=t.data.student.data[0].email,this.sendReceipt()})},sendReceipt(){Object(v["a"])("https://smtpjs.com/v3/smtp.js").then(()=>{window.Email&&window.Email.send({Host:"smtp.gmail.com",Username:this.$emailAddress,Password:this.$emailPassword,To:this.studentEmail,From:this.$emailAddress,Subject:"Payment Receipt",Body:`Hello,<br>\n                        You got a new message from <b>ICT Academy</b>.<br><br>\n\n                        Your payment for ${this.classDetails.className} class was successful. on ${new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)} <br><br><b>\n                        Student ID: ${this.student.studentID}<br>\n                        Student Name: ${this.student.studentName}<br><br>\n\n                        Amount: Rs.${this.selectedPaymentStatus.length*this.classFee}\n\n                        <i>If any doubt please contact the class immediately</i><br><br>\n                        \n                        Best wishes,<br>\n                        ICT Academy - Hakmana<br>\n                        ${this.$tpNo}`}).then(t=>console.log(t))}).catch(()=>{})}},created(){this.getFees()}},y=b,S=(s("7e28"),s("2877")),w=Object(S["a"])(y,f,g,!1,null,"1f22ae42",null);e["a"]=w.exports},"7e28":function(t,e,s){"use strict";s("33d3")},"9d01":function(t,e,s){},b2f3:function(t,e,s){},b73d:function(t,e,s){"use strict";s("ec29"),s("9d01");var a=s("fe09"),i=s("c37a"),n=s("c3f0"),l=s("0789"),o=s("490a"),r=s("80d2");e["a"]=a["a"].extend({name:"v-switch",directives:{Touch:n["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...i["a"].options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...e}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(l["c"],{},[!1===this.loading?null:Object(r["s"])(this,"progress")||this.$createElement(o["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(t){(t.keyCode===r["x"].left&&this.isActive||t.keyCode===r["x"].right&&!this.isActive)&&this.onChange()}}})},ec29:function(t,e,s){},fe09:function(t,e,s){"use strict";s.d(e,"b",(function(){return o}));s("14d9");var a=s("c37a"),i=s("5311"),n=s("8547"),l=s("58df");function o(t){t.preventDefault()}e["a"]=Object(l["a"])(a["a"],i["a"],n["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some(e=>this.valueComparator(e,t)):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=a["a"].options.methods.genLabel.call(this);return t?(t.data.on={click:o},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:o},ref:"input"})},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const s=e.length;e=e.filter(e=>!this.valueComparator(e,t)),e.length===s&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown(t){}}})},ff44:function(t,e,s){}}]);
//# sourceMappingURL=chunk-1293c5e2.1c9b6a2b.js.map
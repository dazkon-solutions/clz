(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f0b62"],{"9e11":function(t,e,s){"use strict";s.r(e);var a=s("4ca6"),n=s("2bc5"),l=s("b0af"),c=s("99d9"),d=s("a523"),r=s("8fea"),u=s("132d"),i=s("2db4"),o=s("2fa4"),h=s("b73d"),m=s("8654"),f=function(){var t=this,e=t._self._c;return e("div",[e(n["a"],{attrs:{items:t.breadcrumbs},scopedSlots:t._u([{key:"divider",fn:function(){return[e(u["a"],[t._v("mdi-chevron-right")])]},proxy:!0}])}),e(d["a"],[[e(l["a"],{attrs:{flat:""}},[e(c["d"],{staticClass:"heading-1 blue-grey lighten-4 blue-grey--text text--darken-2"},[t._v("Mark Attendance "),e("app-AddOneStudentToAttendanceVue",{staticClass:"mr-2",attrs:{classID:t.classID},on:{success:function(e){return t.StudentAddSuccessAlert(e)},failed:function(e){return t.StudentAddFaileAlert(e)}}})],1),e(c["c"],{staticClass:"mt-2"},[t._v(" Mark "),e("strong",[t._v("Attendance")]),t._v(" & "),e("strong",[t._v("Monthly Payments")]),t._v(" of "),e("strong",[t._v(t._s(t.classDetails.className))])]),e(l["a"],{staticClass:"pl-10 pr-10",attrs:{flat:""}},[e(c["d"],[e(o["a"]),e(m["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),[e(l["a"],{attrs:{flat:""}},[e(r["a"],{attrs:{headers:t.headers,items:t.students,search:t.search},scopedSlots:t._u([{key:"item.actions",fn:function({item:s}){return[e(c["a"],[e(h["a"],{staticClass:"mr-3",attrs:{color:"blue",inset:"",label:t.switchLabel(s.attendance)},on:{change:function(e){return t.markAttendance(s.studentID,s.attendance)}},model:{value:s.attendance,callback:function(e){t.$set(s,"attendance",e)},expression:"item.attendance"}}),e(o["a"]),e(a["a"],{attrs:{bordered:"",content:s.paymentStatus,value:s.paymentStatus>1,color:"error"}},[e("app-PayDailyFee",{staticClass:"ml-2",attrs:{show:s.paymentStatus,student:s,classDetails:t.classDetails},on:{success:function(e){return t.paymentSuccessAlert(e)},failed:function(e){return t.paymentFaileAlert(e)}}})],1)],1)]}}],null,!0)})],1)]],2)],1)],e(i["a"],{attrs:{timeout:3e3,absolute:"",bottom:"",color:"green"},model:{value:t.addSuccessAlert,callback:function(e){t.addSuccessAlert=e},expression:"addSuccessAlert"}},[e(u["a"],{attrs:{left:""}},[t._v("mdi-check")]),t._v("Attendance has been marked "),e("strong",[t._v("successfully")])],1),e(i["a"],{attrs:{timeout:3e3,absolute:"",bottom:"",color:"green"},model:{value:t.removeSuccessAlert,callback:function(e){t.removeSuccessAlert=e},expression:"removeSuccessAlert"}},[e(u["a"],{attrs:{left:""}},[t._v("mdi-check")]),t._v("Attendance has been removed "),e("strong",[t._v("successfully")])],1),e(i["a"],{attrs:{timeout:3e3,absolute:"",bottom:"",color:"red"},model:{value:t.failAlert,callback:function(e){t.failAlert=e},expression:"failAlert"}},[e(u["a"],{attrs:{left:""}},[t._v("mdi-alert-outline")]),t._v("Operation is "),e("strong",[t._v("failed")])],1),e(i["a"],{attrs:{timeout:3e3,absolute:"",bottom:"",color:"green"},model:{value:t.successAlert,callback:function(e){t.successAlert=e},expression:"successAlert"}},[e(u["a"],{attrs:{left:""}},[t._v("mdi-check")]),t._v("Payment has been "),e("strong",[t._v("successfully")])],1),e(i["a"],{attrs:{timeout:3e3,absolute:"",bottom:"",color:"red"},model:{value:t.unsuccessAlert,callback:function(e){t.unsuccessAlert=e},expression:"unsuccessAlert"}},[e(u["a"],{attrs:{left:""}},[t._v("mdi-alert-outline")]),t._v("Payment has been "),e("strong",[t._v("failed")])],1),e(i["a"],{attrs:{timeout:3e3,absolute:"",bottom:"",color:"green"},model:{value:t.addStudentSuccessful,callback:function(e){t.addStudentSuccessful=e},expression:"addStudentSuccessful"}},[e(u["a"],{attrs:{left:""}},[t._v("mdi-check")]),t._v("Add student "),e("strong",[t._v("successfully")])],1),e(i["a"],{attrs:{timeout:3e3,absolute:"",bottom:"",color:"red"},model:{value:t.addStudentUnsuccessful,callback:function(e){t.addStudentUnsuccessful=e},expression:"addStudentUnsuccessful"}},[e(u["a"],{attrs:{left:""}},[t._v("mdi-alert-outline")]),t._v("Add student "),e("strong",[t._v("failed")]),t._v(". Please check STUDENT ID")],1)],2)],1)},A=[],S=s("6349"),v=s("5f00"),b={components:{"app-PayDailyFee":S["a"],"app-AddOneStudentToAttendanceVue":v["a"]},data(){return{classID:this.$route.params.id,todayDate:"",search:"",headers:[{text:"STUDENT",align:"start",sortable:!1,value:"studentName"},{text:"ID",sortable:!1,value:"studentID"},{text:"MARKED TIME",value:"time",sortable:!1,align:"start"},{text:"ATTENDANCE",value:"actions",sortable:!1,align:"start"}],students:[],classDetails:[],addSuccessAlert:!1,removeSuccessAlert:!1,failAlert:!1,successAlert:!1,unsuccessAlert:!1,addStudentUnsuccessful:!1,addStudentSuccessful:!1,breadcrumbs:[{text:"Attendance",disabled:!1,href:"/Attendance"},{text:"Today Classes",disabled:!1,href:"/Attendance/TodayClasses"},{text:"Mark Attendance",disabled:!0,href:""}]}},created(){this.getTodayDate(),this.getClassDetails(),this.getStudents()},methods:{show(t){console.log(t)},switchLabel(t){return t?"Present ":"Absent  "},markAttendance(t,e){1==e?this.axios.patch(this.$apiUrl+"/api/v1.0/AttendanceManagement/attendances/students/"+t,{classID:this.classID,date:this.todayDate,attendStatus:"1"}).then(t=>{1==t.data.success?(this.addSuccessAlert=!0,this.getStudents()):(this.failAlert=!0,this.getStudents())}).catch(t=>{this.failAlert=!0,this.getStudents(),console.log(t.data)}):this.axios.patch(this.$apiUrl+"/api/v1.0/AttendanceManagement/attendances/students/"+t,{classID:this.classID,date:this.todayDate,attendStatus:"0"}).then(t=>{1==t.data.success?(this.removeSuccessAlert=!0,this.getStudents()):(this.failAlert=!0,this.getStudents())}).catch(t=>{this.failAlert=!0,this.getStudents(),console.log(t.data)})},getClassDetails(){this.axios.get(this.$apiUrl+"/api/v1.0/ClassManagement/classes/"+this.classID).then(t=>{this.classDetails=t.data.class.data[0]})},getStudents(){this.axios.get(this.$apiUrl+"/api/v1.0/AttendanceManagement/attendances/classes/"+this.classID,{params:{date:this.todayDate}}).then(t=>{this.students=t.data.attendance.data[0].students,this.students.forEach(t=>{"0"==t.attendStatus?t.attendance=!1:"1"==t.attendStatus&&(t.attendance=!0)})})},getTodayDate(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();this.todayDate=a+"-"+s+"-"+e},showPaymentStatus(t){console.log(t)},paymentSuccessAlert(t){this.getStudents(),this.successAlert=t},paymentFaileAlert(t){this.unsuccessAlert=t},StudentAddSuccessAlert(t){this.getStudents(),this.addStudentSuccessful=t},StudentAddFaileAlert(t){this.addStudentUnsuccessful=t}}},g=b,p=s("2877"),y=Object(p["a"])(g,f,A,!1,null,null,null);e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0f0b62.88f8c364.js.map